<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>è®¾è®¡æ¨¡å¼ | </title><meta name="author" content="rieraa"><meta name="copyright" content="rieraa"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="ğŸ˜€">
<meta property="og:type" content="article">
<meta property="og:title" content="è®¾è®¡æ¨¡å¼">
<meta property="og:url" content="https://rieraa.github.io/post/364ea8cc.html">
<meta property="og:site_name">
<meta property="og:description" content="ğŸ˜€">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://rieraa.github.io/img/avatar.jpg">
<meta property="article:published_time" content="2023-10-11T06:53:59.000Z">
<meta property="article:modified_time" content="2023-11-14T06:59:40.677Z">
<meta property="article:author" content="rieraa">
<meta property="article:tag" content="java">
<meta property="article:tag" content="designPattern">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://rieraa.github.io/img/avatar.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://rieraa.github.io/post/364ea8cc.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"æ‰¾ä¸åˆ°æ‚¨æŸ¥è¯¢çš„å†…å®¹ï¼š${query}","hits_stats":"å…±æ‰¾åˆ° ${hits} ç¯‡æ–‡ç« "}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶é”™è¯¯',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: 'å¤©',
  dateSuffix: {
    just: 'åˆšåˆš',
    min: 'åˆ†é’Ÿå‰',
    hour: 'å°æ—¶å‰',
    day: 'å¤©å‰',
    month: 'ä¸ªæœˆå‰'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: 'åŠ è½½æ›´å¤š'
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'è®¾è®¡æ¨¡å¼',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-11-14 14:59:40'
}</script><!--include ./head/noscript.pug--><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          const now = new Date()
          const hour = now.getHours()
          const isNight = hour <= 0 || hour >= 1
          if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
          else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><link rel="stylesheet" href="/css/universe.css"><canvas id="universe"></canvas><script defer src="/js/universe.js"></script><link rel="stylesheet" href="/css/transpancy.css"><div class="aplayer no-destroy" data-id="8794872855" data-server="netease"  data-type="playlist" data-fixed="true" data-mini="true" data-listFolded="false" data-order="random" data-preload="none" data-autoplay="false" muted></div><svg aria-hidden="true" style="position:absolute; overflow:hidden; width:0; height:0"><symbol id="icon-sun" viewBox="0 0 1024 1024"><path d="M960 512l-128 128v192h-192l-128 128-128-128H192v-192l-128-128 128-128V192h192l128-128 128 128h192v192z" fill="#FFD878" p-id="8420"></path><path d="M736 512a224 224 0 1 0-448 0 224 224 0 1 0 448 0z" fill="#FFE4A9" p-id="8421"></path><path d="M512 109.248L626.752 224H800v173.248L914.752 512 800 626.752V800h-173.248L512 914.752 397.248 800H224v-173.248L109.248 512 224 397.248V224h173.248L512 109.248M512 64l-128 128H192v192l-128 128 128 128v192h192l128 128 128-128h192v-192l128-128-128-128V192h-192l-128-128z" fill="#4D5152" p-id="8422"></path><path d="M512 320c105.888 0 192 86.112 192 192s-86.112 192-192 192-192-86.112-192-192 86.112-192 192-192m0-32a224 224 0 1 0 0 448 224 224 0 0 0 0-448z" fill="#4D5152" p-id="8423"></path></symbol><symbol id="icon-moon" viewBox="0 0 1024 1024"><path d="M611.370667 167.082667a445.013333 445.013333 0 0 1-38.4 161.834666 477.824 477.824 0 0 1-244.736 244.394667 445.141333 445.141333 0 0 1-161.109334 38.058667 85.077333 85.077333 0 0 0-65.066666 135.722666A462.08 462.08 0 1 0 747.093333 102.058667a85.077333 85.077333 0 0 0-135.722666 65.024z" fill="#FFB531" p-id="11345"></path><path d="M329.728 274.133333l35.157333-35.157333a21.333333 21.333333 0 1 0-30.165333-30.165333l-35.157333 35.157333-35.114667-35.157333a21.333333 21.333333 0 0 0-30.165333 30.165333l35.114666 35.157333-35.114666 35.157334a21.333333 21.333333 0 1 0 30.165333 30.165333l35.114667-35.157333 35.157333 35.157333a21.333333 21.333333 0 1 0 30.165333-30.165333z" fill="#030835" p-id="11346"></path></symbol></svg><meta name="generator" content="Hexo 6.3.0"></head><body><script>window.paceOptions = {
  restartOnPushState: false
}

document.addEventListener('pjax:send', () => {
  Pace.restart()
})
</script><link rel="stylesheet" href="/css/progress_bar.css"/><script src="https://cdn.jsdelivr.net/npm/pace-js/pace.min.js"></script><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">12</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">14</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">3</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> ä¸»é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> å½’æ¡£</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> ç›®å½•</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> æ¸…å•</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/gallery/"><i class="fa-fw fas fa-images"></i><span> ç›¸å†Œ</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> å…³äº</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background: linear-gradient(35deg, rgba(0, 128, 0, 0.6), rgba(255, 255, 0, 0.6), rgba(0, 0, 255, 0.6), rgba(255, 0, 0, 0.6), rgba(128, 0, 128, 0.6))"><nav id="nav"><span id="blog-info"><a href="/" title=""></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span>æœç´¢</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> ä¸»é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> å½’æ¡£</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> ç›®å½•</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> æ¸…å•</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/gallery/"><i class="fa-fw fas fa-images"></i><span> ç›¸å†Œ</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> å…³äº</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">è®¾è®¡æ¨¡å¼</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">å‘è¡¨äº</span><time class="post-meta-date-created" datetime="2023-10-11T06:53:59.000Z" title="å‘è¡¨äº 2023-10-11 14:53:59">2023-10-11</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">æ›´æ–°äº</span><time class="post-meta-date-updated" datetime="2023-11-14T06:59:40.677Z" title="æ›´æ–°äº 2023-11-14 14:59:40">2023-11-14</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E8%BD%AF%E4%BB%B6%E8%AE%BE%E8%AE%A1%E4%B8%8E%E6%9E%B6%E6%9E%84/">è½¯ä»¶è®¾è®¡ä¸æ¶æ„</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">å­—æ•°æ€»è®¡:</span><span class="word-count">7.6k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»æ—¶é•¿:</span><span>31åˆ†é’Ÿ</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="è®¾è®¡æ¨¡å¼"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»é‡:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="è®¾è®¡æ¨¡å¼"><a href="#è®¾è®¡æ¨¡å¼" class="headerlink" title="è®¾è®¡æ¨¡å¼"></a>è®¾è®¡æ¨¡å¼</h1><h2 id="ç­–ç•¥æ¨¡å¼"><a href="#ç­–ç•¥æ¨¡å¼" class="headerlink" title="ç­–ç•¥æ¨¡å¼"></a>ç­–ç•¥æ¨¡å¼</h2><h3 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a><strong>ä»‹ç»</strong></h3><p>å®šä¹‰ä¸€ç³»åˆ—ç®—æ³•ï¼Œå°†æ¯ä¸€ä¸ªç®—æ³•å°è£…èµ·æ¥ï¼Œå¹¶è®©å®ƒä»¬å¯ä»¥ç›¸äº’æ›¿æ¢ã€‚ç­–ç•¥æ¨¡å¼è®©ç®—æ³•å¯ä»¥ç‹¬ç«‹äºä½¿ç”¨å®ƒçš„å®¢æˆ·å˜åŒ–ã€‚</p>
<h3 id="ç»“æ„"><a href="#ç»“æ„" class="headerlink" title="ç»“æ„"></a><strong>ç»“æ„</strong></h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oooooo.oss-cn-fuzhou.aliyuncs.com/img/image-20230526150814561.png" alt="image-20230526150814561"></p>
<h3 id="è§’è‰²"><a href="#è§’è‰²" class="headerlink" title="è§’è‰²"></a><strong>è§’è‰²</strong></h3><ul>
<li>Contextï¼ˆç¯å¢ƒç±»ï¼‰</li>
<li>Strategyï¼ˆæŠ½è±¡ç­–ç•¥ç±»ï¼‰</li>
<li>Concrete Strategyï¼ˆå…·ä½“ç­–ç•¥ç±»ï¼‰</li>
</ul>
<h3 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a><strong>å®ç°</strong></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æŠ½è±¡ç­–ç•¥ç±»ä»£ç </span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">Strategy</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">algorithm</span><span class="params">()</span>;  <span class="comment">//å£°æ˜æŠ½è±¡ç®—æ³•</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å…·ä½“ç­–ç•¥ç±»ä»£ç </span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ConcreteStrategyA</span> <span class="keyword">extends</span> <span class="title class_">Strategy</span> &#123;</span><br><span class="line">    <span class="comment">//ç®—æ³•çš„å…·ä½“å®ç°</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">algorithm</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//ç®—æ³•A</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç¯å¢ƒç±»ä»£ç </span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Context</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Strategy strategy; <span class="comment">//ç»´æŒä¸€ä¸ªå¯¹æŠ½è±¡ç­–ç•¥ç±»çš„å¼•ç”¨</span></span><br><span class="line">    <span class="comment">//æ³¨å…¥ç­–ç•¥å¯¹è±¡</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setStrategy</span><span class="params">(Strategy strategy)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.strategy= strategy;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è°ƒç”¨ç­–ç•¥ç±»ä¸­çš„ç®—æ³•</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">algorithm</span><span class="params">()</span> &#123;</span><br><span class="line">        strategy.algorithm();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å®¢æˆ·ç«¯ä»£ç ç‰‡æ®µ</span></span><br><span class="line">â€¦â€¦</span><br><span class="line"><span class="type">Context</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Context</span>();</span><br><span class="line">Strategy strategy;</span><br><span class="line">strategy = <span class="keyword">new</span> <span class="title class_">ConcreteStrategyA</span>(); <span class="comment">//å¯åœ¨è¿è¡Œæ—¶æŒ‡å®šç±»å‹ï¼Œé€šè¿‡é…ç½®æ–‡ä»¶å’Œåå°„æœºåˆ¶å®ç°</span></span><br><span class="line">context.setStrategy(strategy);</span><br><span class="line">context.algorithm();</span><br><span class="line">â€¦â€¦</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="è£…é¥°å™¨æ¨¡å¼"><a href="#è£…é¥°å™¨æ¨¡å¼" class="headerlink" title="è£…é¥°å™¨æ¨¡å¼"></a>è£…é¥°å™¨æ¨¡å¼</h2><h3 id="ä»‹ç»-1"><a href="#ä»‹ç»-1" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h3><p>åœ¨ä¸æ”¹å˜ä¸€ä¸ªå¯¹è±¡æœ¬èº«åŠŸèƒ½çš„åŸºç¡€ä¸Šç»™å¯¹è±¡å¢åŠ é¢å¤–çš„æ–°è¡Œä¸ºï¼Œå¼•å…¥äº†è£…é¥°ç±»ï¼Œåœ¨è£…é¥°ç±»ä¸­æ—¢å¯ä»¥è°ƒç”¨å¾…è£…é¥°çš„åŸæœ‰ç±»çš„æ–¹æ³•ï¼Œè¿˜å¯ä»¥å¢åŠ æ–°çš„æ–¹æ³•ï¼Œä»¥æ‰©å±•åŸæœ‰ç±»çš„åŠŸèƒ½</p>
<h3 id="ç»“æ„-1"><a href="#ç»“æ„-1" class="headerlink" title="ç»“æ„"></a><strong>ç»“æ„</strong></h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oooooo.oss-cn-fuzhou.aliyuncs.com/img/image-20230526161910156.png" alt="image-20230526161910156"></p>
<h3 id="è§’è‰²-1"><a href="#è§’è‰²-1" class="headerlink" title="è§’è‰²"></a><strong>è§’è‰²</strong></h3><ul>
<li><p>Componentï¼ˆæŠ½è±¡æ„ä»¶ï¼‰</p>
</li>
<li><p>Concrete Componentï¼ˆå…·ä½“æ„ä»¶ï¼‰</p>
</li>
<li><p>Decoratorï¼ˆæŠ½è±¡è£…é¥°ç±»ï¼‰</p>
</li>
<li><p>Concrete Decoratorï¼ˆå…·ä½“è£…é¥°ç±»ï¼‰</p>
</li>
</ul>
<h3 id="å®ç°-1"><a href="#å®ç°-1" class="headerlink" title="å®ç°"></a><strong>å®ç°</strong></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//	æŠ½è±¡æ„ä»¶</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">Component</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">display</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//  å…·ä½“æ„ä»¶</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ListBox</span> <span class="keyword">extends</span> <span class="title class_">Component</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">display</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ˜¾ç¤ºåˆ—è¡¨æ¡†ï¼&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">--------------------------------------------------------------------------</span><br><span class="line"></span><br><span class="line"><span class="comment">//  å…·ä½“æ„ä»¶</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TextBox</span> <span class="keyword">extends</span> <span class="title class_">Component</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">display</span><span class="params">()</span> &#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;æ˜¾ç¤ºæ–‡æœ¬æ¡†ï¼&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//	æŠ½è±¡è£…é¥°ç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ComponentDecorator</span> <span class="keyword">extends</span> <span class="title class_">Component</span> &#123;</span><br><span class="line">    <span class="comment">//ç»´æŒå¯¹æŠ½è±¡æ„ä»¶ç±»å‹å¯¹è±¡çš„å¼•ç”¨</span></span><br><span class="line">	<span class="keyword">private</span> Component component;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//æ³¨å…¥æŠ½è±¡æ„ä»¶ç±»å‹çš„å¯¹è±¡</span></span><br><span class="line">	<span class="keyword">public</span> <span class="title function_">ComponentDecorator</span><span class="params">(Component component)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.component = component;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">display</span><span class="params">()</span> &#123;</span><br><span class="line">		component.display();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//	å…·ä½“è£…é¥°ç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BlackBorderDecorator</span> <span class="keyword">extends</span> <span class="title class_">ComponentDecorator</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="title function_">BlackBorderDecorator</span><span class="params">(Component component)</span> &#123;</span><br><span class="line">		<span class="built_in">super</span>(component);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">display</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.setBlackBorder();</span><br><span class="line">		<span class="built_in">super</span>.display();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setBlackBorder</span><span class="params">()</span> &#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;ä¸ºæ„ä»¶å¢åŠ é»‘è‰²è¾¹æ¡†ï¼&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="è§‚å¯Ÿè€…æ¨¡å¼"><a href="#è§‚å¯Ÿè€…æ¨¡å¼" class="headerlink" title="è§‚å¯Ÿè€…æ¨¡å¼"></a>è§‚å¯Ÿè€…æ¨¡å¼</h2><h3 id="ä»‹ç»-2"><a href="#ä»‹ç»-2" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h3><p>å®šä¹‰å¯¹è±¡ä¹‹é—´çš„ä¸€ç§ä¸€å¯¹å¤šä¾èµ–å…³ç³»ï¼Œä½¿å¾—æ¯å½“ä¸€ä¸ªå¯¹è±¡çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶ï¼Œå…¶ç›¸å…³ä¾èµ–å¯¹è±¡éƒ½å¾—åˆ°é€šçŸ¥å¹¶è¢«è‡ªåŠ¨æ›´æ–°ã€‚</p>
<h3 id="ç»“æ„-2"><a href="#ç»“æ„-2" class="headerlink" title="ç»“æ„"></a><strong>ç»“æ„</strong></h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oooooo.oss-cn-fuzhou.aliyuncs.com/img/image-20230528120615051.png" alt="image-20230528120615051"></p>
<h3 id="è§’è‰²-2"><a href="#è§’è‰²-2" class="headerlink" title="è§’è‰²"></a>è§’è‰²</h3><ul>
<li>Subjectï¼ˆç›®æ ‡ï¼‰</li>
<li>Concrete Subjectï¼ˆå…·ä½“ç›®æ ‡ï¼‰</li>
<li>Observerï¼ˆè§‚å¯Ÿè€…ï¼‰</li>
<li>Concrete Observerï¼ˆå…·ä½“è§‚å¯Ÿè€…ï¼‰</li>
</ul>
<h3 id="å®ç°-2"><a href="#å®ç°-2" class="headerlink" title="å®ç°"></a>å®ç°</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æˆ˜é˜Ÿæ§åˆ¶ä¸­å¿ƒç±»ï¼šæŠ½è±¡ç›®æ ‡ç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">AllyControlCenter</span> &#123;</span><br><span class="line">	<span class="keyword">protected</span> String allyName; <span class="comment">//æˆ˜é˜Ÿåç§°</span></span><br><span class="line">	<span class="keyword">protected</span> ArrayList&lt;Observer&gt; players = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;Observer&gt;(); <span class="comment">//å®šä¹‰ä¸€ä¸ªé›†åˆç”¨äºå­˜å‚¨æˆ˜é˜Ÿæˆå‘˜</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAllyName</span><span class="params">(String allyName)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.allyName = allyName;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">getAllyName</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="built_in">this</span>.allyName;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//æ³¨å†Œæ–¹æ³•</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">join</span><span class="params">(Observer obs)</span> &#123;</span><br><span class="line">		System.out.println(obs.getName() + <span class="string">&quot;åŠ å…¥&quot;</span> + <span class="built_in">this</span>.allyName + <span class="string">&quot;æˆ˜é˜Ÿï¼&quot;</span>);</span><br><span class="line">		players.add(obs);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//æ³¨é”€æ–¹æ³•</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">quit</span><span class="params">(Observer obs)</span> &#123;</span><br><span class="line">		System.out.println(obs.getName() + <span class="string">&quot;é€€å‡º&quot;</span> + <span class="built_in">this</span>.allyName + <span class="string">&quot;æˆ˜é˜Ÿï¼&quot;</span>);</span><br><span class="line">		players.remove(obs);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//å£°æ˜æŠ½è±¡é€šçŸ¥æ–¹æ³•</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">notifyObserver</span><span class="params">(String name)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å…·ä½“æˆ˜é˜Ÿæ§åˆ¶ä¸­å¿ƒç±»ï¼šå…·ä½“ç›®æ ‡ç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ConcreteAllyControlCenter</span> <span class="keyword">extends</span> <span class="title class_">AllyControlCenter</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="title function_">ConcreteAllyControlCenter</span><span class="params">(String allyName)</span> &#123;</span><br><span class="line">		System.out.println(allyName + <span class="string">&quot;æˆ˜é˜Ÿç»„å»ºæˆåŠŸï¼&quot;</span>);</span><br><span class="line">		System.out.println(<span class="string">&quot;----------------------------&quot;</span>);</span><br><span class="line">		<span class="built_in">this</span>.allyName = allyName;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//å®ç°é€šçŸ¥æ–¹æ³•</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">notifyObserver</span><span class="params">(String name)</span> &#123;</span><br><span class="line">		System.out.println(<span class="built_in">this</span>.allyName + <span class="string">&quot;æˆ˜é˜Ÿç´§æ€¥é€šçŸ¥ï¼Œç›Ÿå‹&quot;</span> + name + <span class="string">&quot;é­å—æ•Œäººæ”»å‡»ï¼&quot;</span>);</span><br><span class="line">		<span class="comment">//éå†è§‚å¯Ÿè€…é›†åˆï¼Œè°ƒç”¨æ¯ä¸€ä¸ªç›Ÿå‹ï¼ˆè‡ªå·±é™¤å¤–ï¼‰çš„æ”¯æ´æ–¹æ³•</span></span><br><span class="line">		<span class="keyword">for</span>(Object obs : players) &#123;</span><br><span class="line">			<span class="keyword">if</span> (!((Observer)obs).getName().equalsIgnoreCase(name)) &#123;</span><br><span class="line">				((Observer)obs).help();</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æŠ½è±¡è§‚å¯Ÿç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Observer</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span>;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span>;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">help</span><span class="params">()</span>; <span class="comment">//å£°æ˜æ”¯æ´ç›Ÿå‹æ–¹æ³•(å“åº”æ–¹æ³•)</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">beAttacked</span><span class="params">(AllyControlCenter acc)</span>; <span class="comment">//å£°æ˜é­å—æ”»å‡»æ–¹æ³•</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æˆ˜é˜Ÿæˆå‘˜ç±»ï¼šå…·ä½“è§‚å¯Ÿè€…ç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Player</span> <span class="keyword">implements</span> <span class="title class_">Observer</span> &#123;</span><br><span class="line">	<span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="title function_">Player</span><span class="params">(String name)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.name = name;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.name = name;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="built_in">this</span>.name;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//æ”¯æ´ç›Ÿå‹æ–¹æ³•çš„å®ç°</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">help</span><span class="params">()</span> &#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;åšæŒä½ï¼Œ&quot;</span> + <span class="built_in">this</span>.name + <span class="string">&quot;æ¥æ•‘ä½ ï¼&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//é­å—æ”»å‡»æ–¹æ³•çš„å®ç°ï¼Œå½“é­å—æ”»å‡»æ—¶å°†è°ƒç”¨æˆ˜é˜Ÿæ§åˆ¶ä¸­å¿ƒç±»çš„é€šçŸ¥æ–¹æ³•notifyObserver()æ¥é€šçŸ¥ç›Ÿå‹</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">beAttacked</span><span class="params">(AllyControlCenter acc)</span> &#123;</span><br><span class="line">		System.out.println(<span class="built_in">this</span>.name + <span class="string">&quot;è¢«æ”»å‡»ï¼&quot;</span>);</span><br><span class="line">		acc.notifyObserver(name);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å®¢æˆ·ç«¯ä»£ç </span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Client</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String args[])</span> &#123;</span><br><span class="line">		<span class="comment">//å®šä¹‰è§‚å¯Ÿç›®æ ‡å¯¹è±¡</span></span><br><span class="line">		AllyControlCenter acc;</span><br><span class="line">		acc = <span class="keyword">new</span> <span class="title class_">ConcreteAllyControlCenter</span>(<span class="string">&quot;é‡‘åº¸ç¾¤ä¾ &quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å®šä¹‰å››ä¸ªè§‚å¯Ÿè€…å¯¹è±¡</span></span><br><span class="line">		Observer player1,player2,player3,player4,player5;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æ³¨å†Œè§‚å¯Ÿè€…</span></span><br><span class="line">		player1 = <span class="keyword">new</span> <span class="title class_">Player</span>(<span class="string">&quot;æ¨è¿‡&quot;</span>);</span><br><span class="line">		acc.join(player1);</span><br><span class="line"></span><br><span class="line">		player2 = <span class="keyword">new</span> <span class="title class_">Player</span>(<span class="string">&quot;ä»¤ç‹å†²&quot;</span>);</span><br><span class="line">		acc.join(player2);</span><br><span class="line"></span><br><span class="line">		player3 = <span class="keyword">new</span> <span class="title class_">Player</span>(<span class="string">&quot;å¼ æ— å¿Œ&quot;</span>);</span><br><span class="line">		acc.join(player3);</span><br><span class="line"></span><br><span class="line">		player4 = <span class="keyword">new</span> <span class="title class_">Player</span>(<span class="string">&quot;æ®µèª‰&quot;</span>);</span><br><span class="line">		acc.join(player4);</span><br><span class="line"></span><br><span class="line">		player5 = <span class="keyword">new</span> <span class="title class_">Player</span>(<span class="string">&quot;éƒ­é–&quot;</span>);</span><br><span class="line">		acc.join(player5);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">		<span class="comment">//æŸæˆå‘˜é­å—æ”»å‡» è°ƒç”¨é€šçŸ¥æ–¹æ³•</span></span><br><span class="line">		player2.beAttacked(acc);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="é€‚é…å™¨æ¨¡å¼"><a href="#é€‚é…å™¨æ¨¡å¼" class="headerlink" title="é€‚é…å™¨æ¨¡å¼"></a>é€‚é…å™¨æ¨¡å¼</h2><h3 id="ä»‹ç»-3"><a href="#ä»‹ç»-3" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h3><p>é€‚é…å™¨æ¨¡å¼æ˜¯ä¸€ç§ç»“æ„å‹è®¾è®¡æ¨¡å¼ï¼Œæ—¨åœ¨è§£å†³ä¸¤ä¸ªä¸å…¼å®¹æ¥å£ä¹‹é—´çš„å…¼å®¹æ€§é—®é¢˜ã€‚å®ƒå…è®¸å°†ä¸€ä¸ªç±»çš„æ¥å£è½¬æ¢æˆå®¢æˆ·ç«¯æ‰€æœŸæœ›çš„å¦ä¸€ä¸ªæ¥å£</p>
<h3 id="ç»“æ„-3"><a href="#ç»“æ„-3" class="headerlink" title="ç»“æ„"></a>ç»“æ„</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oooooo.oss-cn-fuzhou.aliyuncs.com/img/image-20230528124621463.png" alt="image-20230528124621463"></p>
<h3 id="è§’è‰²-3"><a href="#è§’è‰²-3" class="headerlink" title="è§’è‰²"></a>è§’è‰²</h3><ul>
<li>Targetï¼ˆç›®æ ‡æŠ½è±¡ç±»ï¼‰</li>
<li>Adapterï¼ˆé€‚é…å™¨ç±»ï¼‰</li>
<li>Adapteeï¼ˆé€‚é…è€…ç±»ï¼‰</li>
</ul>
<h3 id="å®ç°-3"><a href="#å®ç°-3" class="headerlink" title="å®ç°"></a>å®ç°</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ•‘æŠ¤è½¦ç¯ç±»ï¼Œå……å½“é€‚é…è€…</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AmbulanceLamp</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">alarmLamp</span><span class="params">()</span> &#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;å‘ˆç°æ•‘æŠ¤è½¦ç¯é—ªçƒï¼&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ•‘æŠ¤è½¦å£°éŸ³ç±»ï¼Œå……å½“é€‚é…è€…</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AmbulanceSound</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">alarmSound</span><span class="params">()</span> &#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;å‘å‡ºæ•‘æŠ¤è½¦å£°éŸ³ï¼&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ•‘æŠ¤è½¦é€‚é…å™¨ï¼Œå……å½“é€‚é…å™¨</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AmbulanceCarAdapter</span> <span class="keyword">extends</span> <span class="title class_">CarController</span> &#123;</span><br><span class="line">	<span class="keyword">private</span> AmbulanceSound sound;  <span class="comment">//å®šä¹‰é€‚é…è€…AmbulanceSoundå¯¹è±¡</span></span><br><span class="line">	<span class="keyword">private</span> AmbulanceLamp lamp;    <span class="comment">//å®šä¹‰é€‚é…è€…AmbulanceLampå¯¹è±¡</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="title function_">AmbulanceCarAdapter</span><span class="params">()</span> &#123;</span><br><span class="line">		sound = <span class="keyword">new</span> <span class="title class_">AmbulanceSound</span>();</span><br><span class="line">		lamp = <span class="keyword">new</span> <span class="title class_">AmbulanceLamp</span>();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//å‘å‡ºæ•‘æŠ¤è½¦å£°éŸ³</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">phonate</span><span class="params">()</span> &#123;</span><br><span class="line">		sound.alarmSound();  <span class="comment">//è°ƒç”¨é€‚é…è€…ç±»AmbulanceSoundçš„æ–¹æ³•(ç±»ä¼¼äºè½¬å‘è°ƒç”¨)</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//å‘ˆç°æ•‘æŠ¤è½¦ç¯é—ªçƒ</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">twinkle</span><span class="params">()</span> &#123;</span><br><span class="line">		lamp.alarmLamp();   <span class="comment">//è°ƒç”¨é€‚é…è€…ç±»AmbulanceLampçš„æ–¹æ³•</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ±½è½¦æ§åˆ¶ç±»ï¼Œå……å½“ç›®æ ‡æŠ½è±¡ç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">CarController</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">move</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ç©å…·æ±½è½¦ç§»åŠ¨ï¼&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">phonate</span><span class="params">()</span>; <span class="comment">//å‘å‡ºå£°éŸ³</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">twinkle</span><span class="params">()</span>; <span class="comment">//ç¯å…‰é—ªçƒ</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="æŠ½è±¡å·¥å‚æ¨¡å¼"><a href="#æŠ½è±¡å·¥å‚æ¨¡å¼" class="headerlink" title="æŠ½è±¡å·¥å‚æ¨¡å¼"></a>æŠ½è±¡å·¥å‚æ¨¡å¼</h2><h3 id="ä»‹ç»-4"><a href="#ä»‹ç»-4" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h3><p>æä¾›ä¸€ä¸ªåˆ›å»ºä¸€ç³»åˆ—ç›¸å…³æˆ–ç›¸äº’ä¾èµ–å¯¹è±¡çš„æ¥å£ï¼Œè€Œæ— é¡»æŒ‡å®šå®ƒä»¬å…·ä½“çš„ç±»ã€‚åˆç§°ä¸ºå·¥å…·(Kit)æ¨¡å¼æŠ½è±¡å·¥å‚æ¨¡å¼ä¸­çš„å…·ä½“å·¥å‚ä¸åªæ˜¯åˆ›å»ºä¸€ç§äº§å“ï¼Œå®ƒè´Ÿè´£åˆ›å»ºä¸€æ—äº§å“å½“ä¸€ä¸ªå·¥å‚ç­‰çº§ç»“æ„å¯ä»¥åˆ›å»ºå‡ºåˆ†å±äºä¸åŒäº§å“ç­‰çº§ç»“æ„çš„ä¸€ä¸ªäº§å“æ—ä¸­çš„æ‰€æœ‰å¯¹è±¡æ—¶ï¼ŒæŠ½è±¡å·¥å‚æ¨¡å¼æ¯”å·¥å‚æ–¹æ³•æ¨¡å¼æ›´ä¸ºç®€å•ã€æ›´æœ‰æ•ˆç‡</p>
<h3 id="ç»“æ„-4"><a href="#ç»“æ„-4" class="headerlink" title="ç»“æ„"></a>ç»“æ„</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oooooo.oss-cn-fuzhou.aliyuncs.com/img/image-20230529121322432.png" alt="image-20230529121322432"></p>
<h3 id="è§’è‰²-4"><a href="#è§’è‰²-4" class="headerlink" title="è§’è‰²"></a>è§’è‰²</h3><ul>
<li>Abstract Factoryï¼ˆæŠ½è±¡å·¥å‚ï¼‰</li>
<li>Concrete Factoryï¼ˆå…·ä½“å·¥å‚ï¼‰</li>
<li>Abstract Productï¼ˆæŠ½è±¡äº§å“ï¼‰</li>
<li>Concrete Productï¼ˆå…·ä½“äº§å“ï¼‰</li>
</ul>
<h3 id="å®ç°-4"><a href="#å®ç°-4" class="headerlink" title="å®ç°"></a>å®ç°</h3><p><strong>ä¸‰ç§æŠ½è±¡äº§å“</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æŠ½è±¡æŒ‰é’®</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Button</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">display</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æŠ½è±¡è¾¹æ¡†</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">ComboBox</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">display</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æŠ½è±¡æ–‡æœ¬æ¡†</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">TextField</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">display</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>æŠ½è±¡å·¥å‚</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">SkinFactory</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> Button <span class="title function_">createButton</span><span class="params">()</span>;</span><br><span class="line">	<span class="keyword">public</span> TextField <span class="title function_">createTextField</span><span class="params">()</span>;</span><br><span class="line">	<span class="keyword">public</span> ComboBox <span class="title function_">createComboBox</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>å…·ä½“äº§å“ï¼ˆéƒ¨åˆ†ï¼‰</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">	<span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringButton</span> <span class="keyword">implements</span> <span class="title class_">Button</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">display</span><span class="params">()</span> &#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;æ˜¾ç¤ºæµ…ç»¿è‰²æŒ‰é’®ã€‚&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringComboBox</span> <span class="keyword">implements</span> <span class="title class_">ComboBox</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">display</span><span class="params">()</span> &#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;æ˜¾ç¤ºç»¿è‰²è¾¹æ¡†ç»„åˆæ¡†ã€‚&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SummerButton</span> <span class="keyword">implements</span> <span class="title class_">Button</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">display</span><span class="params">()</span> &#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;æ˜¾ç¤ºæµ…è“è‰²æŒ‰é’®ã€‚&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SummerComboBox</span> <span class="keyword">implements</span> <span class="title class_">ComboBox</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">display</span><span class="params">()</span> &#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;æ˜¾ç¤ºè“è‰²è¾¹æ¡†ç»„åˆæ¡†ã€‚&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>å…·ä½“å·¥å‚</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// SpringSkinFactoryå·¥å‚</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringSkinFactory</span> <span class="keyword">implements</span> <span class="title class_">SkinFactory</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> Button <span class="title function_">createButton</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">SpringButton</span>();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> TextField <span class="title function_">createTextField</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">SpringTextField</span>();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> ComboBox <span class="title function_">createComboBox</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">SpringComboBox</span>();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// SummerSkinFactoryå·¥å‚</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SummerSkinFactory</span> <span class="keyword">implements</span> <span class="title class_">SkinFactory</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> Button <span class="title function_">createButton</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">SummerButton</span>();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> TextField <span class="title function_">createTextField</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">SummerTextField</span>();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> ComboBox <span class="title function_">createComboBox</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">SummerComboBox</span>();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="å»ºé€ è€…æ¨¡å¼"><a href="#å»ºé€ è€…æ¨¡å¼" class="headerlink" title="å»ºé€ è€…æ¨¡å¼"></a>å»ºé€ è€…æ¨¡å¼</h2><h3 id="ä»‹ç»-5"><a href="#ä»‹ç»-5" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h3><p>å°†ä¸€ä¸ªå¤æ‚å¯¹è±¡çš„&#x3D;&#x3D;æ„å»ºä¸å®ƒçš„è¡¨ç¤ºåˆ†ç¦»&#x3D;&#x3D;ï¼Œä½¿å¾—åŒæ ·çš„æ„å»ºè¿‡ç¨‹å¯ä»¥åˆ›å»ºä¸åŒçš„è¡¨ç¤ºã€‚å°†å®¢æˆ·ç«¯ä¸åŒ…å«å¤šä¸ªéƒ¨ä»¶çš„å¤æ‚å¯¹è±¡çš„åˆ›å»ºè¿‡ç¨‹åˆ†ç¦»ï¼Œå®¢æˆ·ç«¯æ— é¡»çŸ¥é“å¤æ‚å¯¹è±¡çš„å†…éƒ¨ç»„æˆéƒ¨åˆ†ä¸è£…é…æ–¹å¼ï¼Œåªéœ€è¦çŸ¥é“æ‰€éœ€å»ºé€ è€…çš„ç±»å‹å³å¯å…³æ³¨å¦‚ä½•é€æ­¥åˆ›å»ºä¸€ä¸ªå¤æ‚çš„å¯¹è±¡ï¼Œä¸åŒçš„å»ºé€ è€…å®šä¹‰äº†ä¸åŒçš„åˆ›å»ºè¿‡ç¨‹</p>
<h3 id="ç»“æ„-5"><a href="#ç»“æ„-5" class="headerlink" title="ç»“æ„"></a>ç»“æ„</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oooooo.oss-cn-fuzhou.aliyuncs.com/img/image-20230529185109415.png" alt="image-20230529185109415"></p>
<h3 id="è§’è‰²-5"><a href="#è§’è‰²-5" class="headerlink" title="è§’è‰²"></a>è§’è‰²</h3><ul>
<li>Builderï¼ˆæŠ½è±¡å»ºé€ è€…ï¼‰</li>
<li>Concrete Builderï¼ˆå…·ä½“å»ºé€ è€…ï¼‰</li>
<li>Productï¼ˆäº§å“ï¼‰</li>
<li>Directorï¼ˆæŒ‡æŒ¥è€…ï¼‰</li>
</ul>
<h3 id="å®ç°-5"><a href="#å®ç°-5" class="headerlink" title="å®ç°"></a>å®ç°</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å…·ä½“è§’è‰²ç±»ï¼ˆäº§å“ï¼‰</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Actor</span> &#123;</span><br><span class="line">	<span class="keyword">private</span> String type; <span class="comment">//è§’è‰²ç±»å‹</span></span><br><span class="line">	<span class="keyword">private</span> String sex; <span class="comment">//æ€§åˆ«</span></span><br><span class="line">	<span class="keyword">private</span> String face; <span class="comment">//è„¸å‹</span></span><br><span class="line">	<span class="keyword">private</span> String costume; <span class="comment">//æœè£…</span></span><br><span class="line">	<span class="keyword">private</span> String hairstyle; <span class="comment">//å‘å‹</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//çœç•¥å…·ä½“çš„getter setter</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æŠ½è±¡å»ºé€ è€…</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">ActorBuilder</span> &#123;</span><br><span class="line">    <span class="keyword">protected</span> <span class="type">Actor</span> <span class="variable">actor</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Actor</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">buildType</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">buildSex</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">buildFace</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">buildCostume</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">buildHairstyle</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å·¥å‚æ–¹æ³•ï¼Œè¿”å›ä¸€ä¸ªå®Œæ•´çš„æ¸¸æˆè§’è‰²å¯¹è±¡</span></span><br><span class="line">    <span class="keyword">public</span> Actor <span class="title function_">createActor</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> actor;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å…·ä½“å»ºé€ è€…</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AngelBuilder</span> <span class="keyword">extends</span> <span class="title class_">ActorBuilder</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">buildType</span><span class="params">()</span> &#123;</span><br><span class="line">		actor.setType(<span class="string">&quot;å¤©ä½¿&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">buildSex</span><span class="params">()</span> &#123;</span><br><span class="line">		actor.setSex(<span class="string">&quot;å¥³&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">buildFace</span><span class="params">()</span> &#123;</span><br><span class="line">		actor.setFace(<span class="string">&quot;æ¼‚äº®&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">buildCostume</span><span class="params">()</span> &#123;</span><br><span class="line">		actor.setCostume(<span class="string">&quot;ç™½è£™&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">buildHairstyle</span><span class="params">()</span> &#123;</span><br><span class="line">		actor.setHairstyle(<span class="string">&quot;æŠ«è‚©é•¿å‘&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æŒ‡æŒ¥è€…</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ActorController</span> &#123;</span><br><span class="line">    <span class="comment">//é€æ­¥æ„å»ºå¤æ‚äº§å“å¯¹è±¡</span></span><br><span class="line">	<span class="keyword">public</span> Actor <span class="title function_">construct</span><span class="params">(ActorBuilder ab)</span> &#123;</span><br><span class="line">		Actor actor;</span><br><span class="line">		ab.buildType();</span><br><span class="line">		ab.buildSex();</span><br><span class="line">		ab.buildFace();</span><br><span class="line">		ab.buildCostume();</span><br><span class="line">		ab.buildHairstyle();</span><br><span class="line">		actor=ab.createActor();</span><br><span class="line">		<span class="keyword">return</span> actor;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å®¢æˆ·ç«¯ä»£ç </span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Client</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String args[])</span> &#123;</span><br><span class="line">        <span class="comment">//é’ˆå¯¹æŠ½è±¡å»ºé€ è€…ç¼–ç¨‹</span></span><br><span class="line">        ActorBuilder ab;</span><br><span class="line">        <span class="comment">//åå°„ç”Ÿæˆå…·ä½“å»ºé€ è€…å¯¹è±¡</span></span><br><span class="line">        ab = (ActorBuilder)XMLUtil.getBean();</span><br><span class="line"></span><br><span class="line">        <span class="type">ActorController</span> <span class="variable">ac</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ActorController</span>();</span><br><span class="line">        Actor actor;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//é€šè¿‡æŒ‡æŒ¥è€…åˆ›å»ºå®Œæ•´çš„å»ºé€ è€…å¯¹è±¡</span></span><br><span class="line">        <span class="comment">//ä¼ å…¥å…·ä½“å»ºé€ è€…å¯¹è±¡ï¼ˆActorBuilder çš„å­ç±»å¯¹è±¡ï¼‰</span></span><br><span class="line">        actor = ac.construct(ab);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">type</span> <span class="operator">=</span> actor.getType();</span><br><span class="line">        System.out.println(type + <span class="string">&quot;çš„å¤–è§‚ï¼š&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;æ€§åˆ«ï¼š&quot;</span> + actor.getSex());</span><br><span class="line">        System.out.println(<span class="string">&quot;é¢å®¹ï¼š&quot;</span> + actor.getFace());</span><br><span class="line">        System.out.println(<span class="string">&quot;æœè£…ï¼š&quot;</span> + actor.getCostume());</span><br><span class="line">        System.out.println(<span class="string">&quot;å‘å‹ï¼š&quot;</span> + actor.getHairstyle());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="åŸå‹æ¨¡å¼"><a href="#åŸå‹æ¨¡å¼" class="headerlink" title="åŸå‹æ¨¡å¼"></a>åŸå‹æ¨¡å¼</h2><h3 id="ä»‹ç»-6"><a href="#ä»‹ç»-6" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h3><p>ä½¿ç”¨åŸå‹å®ä¾‹æŒ‡å®šå¾…åˆ›å»ºå¯¹è±¡çš„ç±»å‹ï¼Œå¹¶ä¸”é€šè¿‡å¤åˆ¶è¿™ä¸ªåŸå‹æ¥åˆ›å»ºæ–°çš„å¯¹è±¡</p>
<h3 id="ç»“æ„-6"><a href="#ç»“æ„-6" class="headerlink" title="ç»“æ„"></a>ç»“æ„</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oooooo.oss-cn-fuzhou.aliyuncs.com/img/image-20230530091411776.png" alt="image-20230530091411776"></p>
<h3 id="è§’è‰²-6"><a href="#è§’è‰²-6" class="headerlink" title="è§’è‰²"></a>è§’è‰²</h3><ul>
<li>Prototypeï¼ˆæŠ½è±¡åŸå‹ç±»ï¼‰</li>
<li>Concrete Prototypeï¼ˆå…·ä½“åŸå‹ç±»ï¼‰</li>
<li>Clientï¼ˆå®¢æˆ·ç±»ï¼‰</li>
</ul>
<h3 id="å®ç°-6"><a href="#å®ç°-6" class="headerlink" title="å®ç°"></a>å®ç°</h3><h4 id="æµ…æ‹·è´"><a href="#æµ…æ‹·è´" class="headerlink" title="æµ…æ‹·è´"></a>æµ…æ‹·è´</h4><p>(å…¶ä¸­çš„å¼•ç”¨å¯¹è±¡ç›¸åŒ)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WeeklyLog</span> <span class="keyword">implements</span> <span class="title class_">Cloneable</span> &#123;</span><br><span class="line">    <span class="comment">//ä¸ºäº†ç®€åŒ–è®¾è®¡å’Œå®ç°ï¼Œå‡è®¾ä¸€ä»½å·¥ä½œå‘¨æŠ¥ä¸­åªæœ‰ä¸€ä¸ªé™„ä»¶å¯¹è±¡ï¼Œå®é™…æƒ…å†µä¸­å¯ä»¥åŒ…å«å¤šä¸ªé™„ä»¶ï¼Œå¯ä»¥é€šè¿‡Listç­‰é›†åˆå¯¹è±¡æ¥å®ç°</span></span><br><span class="line">    <span class="keyword">private</span> Attachment attachment;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String date;</span><br><span class="line">    <span class="keyword">private</span> String content;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAttachment</span><span class="params">(Attachment attachment)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.attachment = attachment;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setDate</span><span class="params">(String date)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.date = date;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setContent</span><span class="params">(String content)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.content = content;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Attachment <span class="title function_">getAttachment</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> (<span class="built_in">this</span>.attachment);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> (<span class="built_in">this</span>.name);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getDate</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> (<span class="built_in">this</span>.date);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getContent</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> (<span class="built_in">this</span>.content);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ä½¿ç”¨clone()æ–¹æ³•å®ç°æµ…å…‹éš†</span></span><br><span class="line">    <span class="keyword">public</span> WeeklyLog <span class="title function_">clone</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">Object</span> <span class="variable">obj</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            obj = <span class="built_in">super</span>.clone();</span><br><span class="line">            <span class="keyword">return</span> (WeeklyLog) obj;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (CloneNotSupportedException e) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;ä¸æ”¯æŒå¤åˆ¶ï¼&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="æ·±æ‹·è´"><a href="#æ·±æ‹·è´" class="headerlink" title="æ·±æ‹·è´"></a>æ·±æ‹·è´</h4><p>&#x3D;&#x3D;ï¼ˆåºåˆ—åŒ–ä¸ååºåˆ—åŒ–ï¼‰&#x3D;&#x3D;</p>
<p>åºåˆ—åŒ–æ˜¯å°†å¯¹è±¡è½¬æ¢ä¸ºå­—èŠ‚æµçš„è¿‡ç¨‹ï¼Œå¯ä»¥å°†å¯¹è±¡ä¿å­˜åˆ°æ–‡ä»¶ã€ä¼ è¾“åˆ°ç½‘ç»œæˆ–åœ¨è¿›ç¨‹ä¹‹é—´è¿›è¡Œé€šä¿¡ã€‚åœ¨åºåˆ—åŒ–è¿‡ç¨‹ä¸­ï¼Œå¯¹è±¡çš„çŠ¶æ€ï¼ˆå³å¯¹è±¡çš„æ•°æ®ï¼‰è¢«è½¬æ¢ä¸ºå­—èŠ‚åºåˆ—ï¼ŒåŒ…æ‹¬å¯¹è±¡çš„å­—æ®µå’Œç›¸åº”çš„æ•°å€¼ã€‚åºåˆ—åŒ–åçš„å­—èŠ‚æµå¯ä»¥è¢«ä¿å­˜ä¸‹æ¥æˆ–ä¼ è¾“ç»™å…¶ä»–åœ°æ–¹ã€‚</p>
<p>ååºåˆ—åŒ–æ˜¯å°†å­—èŠ‚æµè½¬æ¢ä¸ºå¯¹è±¡çš„è¿‡ç¨‹ï¼Œå°†ä¿å­˜åœ¨å­—èŠ‚æµä¸­çš„æ•°æ®é‡æ–°æ„é€ æˆå¯¹è±¡ã€‚åœ¨ååºåˆ—åŒ–è¿‡ç¨‹ä¸­ï¼Œå­—èŠ‚åºåˆ—è¢«è¿˜åŸä¸ºå¯¹è±¡çš„çŠ¶æ€ï¼Œé‡æ–°åˆ›å»ºå¯¹è±¡å¹¶å°†ä¿å­˜çš„æ•°æ®å¡«å……åˆ°å¯¹è±¡çš„å­—æ®µä¸­ã€‚</p>
<p>åœ¨å†™å…¥å­—èŠ‚æµæ—¶ï¼Œå¯¹è±¡çš„æ‰€æœ‰å­—æ®µéƒ½ä¼šè¢«åºåˆ—åŒ–ä¸ºå­—èŠ‚åºåˆ—ã€‚è€Œåœ¨è¯»å–å­—èŠ‚æµæ—¶ï¼Œå­—èŠ‚åºåˆ—ä¼šè¢«ååºåˆ—åŒ–ä¸ºä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œå¹¶å°†ä¿å­˜çš„æ•°æ®å¡«å……åˆ°æ–°å¯¹è±¡çš„å­—æ®µä¸­ã€‚</p>
<p>ç”±äºååºåˆ—åŒ–è¿‡ç¨‹ä¼šé‡æ–°åˆ›å»ºå¯¹è±¡ï¼Œå› æ­¤æ–°å¯¹è±¡ä¸åŸå§‹å¯¹è±¡æ˜¯å®Œå…¨ç‹¬ç«‹çš„ï¼Œå®ƒä»¬æ‹¥æœ‰ç›¸åŒçš„æ•°æ®ä½†æ˜¯ä½äºä¸åŒçš„å†…å­˜ä½ç½®ã€‚è¿™æ ·å°±å®ç°äº†æ·±æ‹·è´ï¼Œä¿ç•™äº†å¯¹è±¡åŠå…¶æ‰€æœ‰å¼•ç”¨ç±»å‹å­—æ®µçš„æ•°æ®ï¼Œå¹¶ä¸”ä¸å…±äº«åŒä¸€å—å†…å­˜ã€‚</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸ºäº†ä½¿å¯¹è±¡èƒ½å¤Ÿè¿›è¡Œåºåˆ—åŒ–å’Œååºåˆ—åŒ–ï¼Œéœ€è¦å®ç° <code>Serializable</code> æ¥å£ï¼Œå¹¶ç¡®ä¿å¯¹è±¡çš„æ‰€æœ‰å¼•ç”¨ç±»å‹å­—æ®µä¹Ÿæ˜¯å¯åºåˆ—åŒ–çš„ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WeeklyLog</span> <span class="keyword">implements</span> <span class="title class_">Serializable</span> &#123;</span><br><span class="line">	<span class="keyword">private</span> Attachment attachment;</span><br><span class="line">	<span class="keyword">private</span> String name;</span><br><span class="line">	<span class="keyword">private</span> String date;</span><br><span class="line">	<span class="keyword">private</span> String content;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAttachment</span><span class="params">(Attachment attachment)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.attachment = attachment;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.name = name;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setDate</span><span class="params">(String date)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.date = date;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setContent</span><span class="params">(String content)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.content = content;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> Attachment <span class="title function_">getAttachment</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> (<span class="built_in">this</span>.attachment);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> (<span class="built_in">this</span>.name);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">getDate</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> (<span class="built_in">this</span>.date);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">getContent</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> (<span class="built_in">this</span>.content);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//ä½¿ç”¨åºåˆ—åŒ–æŠ€æœ¯å®ç°æ·±å…‹éš†</span></span><br><span class="line">	<span class="keyword">public</span> WeeklyLog <span class="title function_">deepClone</span><span class="params">()</span> <span class="keyword">throws</span> IOException, ClassNotFoundException, OptionalDataException &#123;</span><br><span class="line">		<span class="comment">//å°†å¯¹è±¡å†™å…¥æµä¸­</span></span><br><span class="line">		ByteArrayOutputStream bao=<span class="keyword">new</span> <span class="title class_">ByteArrayOutputStream</span>();</span><br><span class="line">		ObjectOutputStream oos=<span class="keyword">new</span> <span class="title class_">ObjectOutputStream</span>(bao);</span><br><span class="line">		oos.writeObject(<span class="built_in">this</span>);</span><br><span class="line"></span><br><span class="line">		<span class="comment">//å°†å¯¹è±¡ä»æµä¸­å–å‡º</span></span><br><span class="line">		ByteArrayInputStream bis=<span class="keyword">new</span> <span class="title class_">ByteArrayInputStream</span>(bao.toByteArray());</span><br><span class="line">		ObjectInputStream ois=<span class="keyword">new</span> <span class="title class_">ObjectInputStream</span>(bis);</span><br><span class="line">		<span class="keyword">return</span> (WeeklyLog)ois.readObject();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="å•ä¾‹æ¨¡å¼"><a href="#å•ä¾‹æ¨¡å¼" class="headerlink" title="å•ä¾‹æ¨¡å¼"></a>å•ä¾‹æ¨¡å¼</h2><h3 id="ä»‹ç»-7"><a href="#ä»‹ç»-7" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h3><p>ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå¹¶æä¾›ä¸€ä¸ªå…¨å±€è®¿é—®ç‚¹æ¥è®¿é—®è¿™ä¸ªå”¯ä¸€å®ä¾‹ã€‚</p>
<h3 id="ç»“æ„-7"><a href="#ç»“æ„-7" class="headerlink" title="ç»“æ„"></a>ç»“æ„</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oooooo.oss-cn-fuzhou.aliyuncs.com/img/image-20230530150040291.png" alt="image-20230530150040291"></p>
<h3 id="è§’è‰²-7"><a href="#è§’è‰²-7" class="headerlink" title="è§’è‰²"></a>è§’è‰²</h3><ul>
<li>Singletonï¼ˆå•ä¾‹ï¼‰</li>
</ul>
<h3 id="å®ç°-7"><a href="#å®ç°-7" class="headerlink" title="å®ç°"></a>å®ç°</h3><h4 id="é¥¿æ±‰å¼"><a href="#é¥¿æ±‰å¼" class="headerlink" title="é¥¿æ±‰å¼"></a>é¥¿æ±‰å¼</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Singleton</span> &#123;</span><br><span class="line">    <span class="comment">// ç§æœ‰é™æ€å˜é‡ï¼Œç”¨äºä¿å­˜å•ä¾‹å®ä¾‹</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">Singleton</span> <span class="variable">instance</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Singleton</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç§æœ‰æ„é€ å‡½æ•°ï¼Œé˜²æ­¢å¤–éƒ¨ç›´æ¥å®ä¾‹åŒ–å¯¹è±¡</span></span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">Singleton</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// åˆå§‹åŒ–æ“ä½œ</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å…¬å…±é™æ€æ–¹æ³•ï¼Œæä¾›å…¨å±€è®¿é—®ç‚¹è·å–å•ä¾‹å®ä¾‹</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title function_">getInstance</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="æ‡’æ±‰å¼"><a href="#æ‡’æ±‰å¼" class="headerlink" title="æ‡’æ±‰å¼"></a>æ‡’æ±‰å¼</h4><ul>
<li>åŸºç¡€ç‰ˆ</li>
</ul>
<p>å¤šçº¿ç¨‹ç¯å¢ƒä¸‹å¯èƒ½ä¼šå‡ºç°é—®é¢˜ã€‚å¦‚æœå¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®<code>getInstance()</code>æ–¹æ³•ï¼Œå¹¶ä¸”åœ¨<code>instance</code>è¿˜æœªè¢«åˆ›å»ºæ—¶ï¼Œé‚£ä¹ˆæ¯ä¸ªçº¿ç¨‹éƒ½ä¼šé€šè¿‡åˆ¤æ–­<code>instance</code>ä¸º<code>null</code>çš„æ¡ä»¶ï¼Œå¹¶åˆ›å»ºä¸€ä¸ªæ–°çš„å®ä¾‹ã€‚è¿™æ ·å°±ä¼šç ´åå•ä¾‹çš„å”¯ä¸€æ€§ï¼Œå¯¼è‡´å¤šä¸ªå®ä¾‹è¢«åˆ›å»ºã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LazySingleton</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">LazySingleton</span> <span class="variable">instance</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">LazySingleton</span><span class="params">()</span> &#123; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> LazySingleton <span class="title function_">getInstance</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (instance == <span class="literal">null</span>) &#123;</span><br><span class="line">            instance = <span class="keyword">new</span> <span class="title class_">LazySingleton</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>æ·»åŠ é”æ–¹æ³•</li>
</ul>
<p>é€šè¿‡<code>synchronized</code>å…³é”®å­—ä¿®é¥°<code>getInstance()</code>æ–¹æ³•ï¼Œä»¥ç¡®ä¿åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹åªåˆ›å»ºä¸€ä¸ªå®ä¾‹ã€‚å½“ç¬¬ä¸€ä¸ªçº¿ç¨‹è°ƒç”¨<code>getInstance()</code>æ–¹æ³•æ—¶ï¼Œå¦‚æœå®ä¾‹å°šæœªåˆ›å»ºï¼Œå®ƒå°†åˆ›å»ºä¸€ä¸ªæ–°çš„å®ä¾‹</p>
<p><u>å­˜åœ¨ç¼ºç‚¹</u>ï¼š</p>
<ol>
<li>æ¯æ¬¡è°ƒç”¨<code>getInstance()</code>æ–¹æ³•éƒ½ä¼šè¿›å…¥<code>synchronized</code>åŒæ­¥å—ï¼Œå³ä½¿å®ä¾‹å·²ç»è¢«åˆ›å»ºã€‚è¿™ä¼šé€ æˆä¸å¿…è¦çš„åŒæ­¥å¼€é”€ï¼Œå½±å“æ€§èƒ½ã€‚</li>
<li>åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œå½“å¤šä¸ªçº¿ç¨‹åŒæ—¶é€šè¿‡ç¬¬ä¸€ä¸ªåˆ¤æ–­æ¡ä»¶<code>instance == null</code>æ—¶ï¼Œå®ƒä»¬ä¼šä¾æ¬¡è¿›å…¥<code>synchronized</code>åŒæ­¥å—ï¼Œè€Œåªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½å¤Ÿåˆ›å»ºå®ä¾‹ï¼Œå…¶ä»–çº¿ç¨‹ä¼šè¢«é˜»å¡ã€‚è¿™å¯èƒ½ä¼šå¼•èµ·çº¿ç¨‹ç«äº‰å’Œæ€§èƒ½é—®é¢˜ã€‚</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LazySingleton</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">LazySingleton</span> <span class="variable">instance</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">LazySingleton</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// ç§æœ‰æ„é€ å‡½æ•°ï¼Œé˜²æ­¢å¤–éƒ¨ç›´æ¥å®ä¾‹åŒ–å¯¹è±¡</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å…¬å…±é™æ€æ–¹æ³•ï¼Œæä¾›å…¨å±€è®¿é—®ç‚¹è·å–å•ä¾‹å®ä¾‹</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> å•ä¾‹å®ä¾‹</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">synchronized</span> <span class="keyword">public</span> <span class="keyword">static</span> LazySingleton <span class="title function_">getInstance</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (instance == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="comment">// å¦‚æœå®ä¾‹ä¸ºç©ºï¼Œåˆ™åˆ›å»ºæ–°çš„å®ä¾‹</span></span><br><span class="line">            instance = <span class="keyword">new</span> <span class="title class_">LazySingleton</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>é”ä»£ç æ®µ</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oooooo.oss-cn-fuzhou.aliyuncs.com/img/image-20230530151643226.png" alt="image-20230530151643226"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LazySingleton</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">volatile</span> <span class="keyword">static</span> <span class="type">LazySingleton</span> <span class="variable">instance</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">LazySingleton</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// ç§æœ‰æ„é€ å‡½æ•°</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> LazySingleton <span class="title function_">getInstance</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (instance == <span class="literal">null</span>) &#123; <span class="comment">// ç¬¬ä¸€ä¸ªåˆ¤æ–­ï¼Œé¿å…ä¸å¿…è¦çš„åŒæ­¥</span></span><br><span class="line">            <span class="keyword">synchronized</span> (LazySingleton.class) &#123; <span class="comment">// synchronizedå…³é”®å­—ä¿®é¥°çš„åŒæ­¥å—</span></span><br><span class="line">                <span class="keyword">if</span> (instance == <span class="literal">null</span>) &#123; <span class="comment">// ç¬¬äºŒä¸ªåˆ¤æ–­ï¼Œç¡®ä¿åªæœ‰ä¸€ä¸ªçº¿ç¨‹åˆ›å»ºå®ä¾‹</span></span><br><span class="line">                    instance = <span class="keyword">new</span> <span class="title class_">LazySingleton</span>();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="é™æ€å†…éƒ¨ç±»"><a href="#é™æ€å†…éƒ¨ç±»" class="headerlink" title="é™æ€å†…éƒ¨ç±»"></a>é™æ€å†…éƒ¨ç±»</h4><p>&#x3D;&#x3D;ç›¸å…³ä»‹ç»&#x3D;&#x3D;ï¼š</p>
<p>åœ¨é™æ€å†…éƒ¨ç±»ä¸­å®šä¹‰çš„é™æ€æ–¹æ³•å¯ä»¥ç›´æ¥è¢«è°ƒç”¨ï¼Œä¸éœ€è¦é€šè¿‡åˆ›å»ºå†…éƒ¨ç±»çš„å®ä¾‹æ¥è®¿é—®ã€‚é™æ€å†…éƒ¨ç±»ä¸å¤–éƒ¨ç±»ä¹‹é—´æ˜¯ç‹¬ç«‹çš„ï¼Œå› æ­¤å¯ä»¥ç›´æ¥è®¿é—®é™æ€å†…éƒ¨ç±»ä¸­çš„é™æ€æˆå‘˜ï¼ŒåŒ…æ‹¬é™æ€æ–¹æ³•ã€‚</p>
<p>åœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œé™æ€å†…éƒ¨ç±»<code>HolderClass</code>ä¸­çš„<code>instance</code>å˜é‡æ˜¯ç§æœ‰é™æ€çš„ï¼Œè€Œ<code>getInstance()</code>æ–¹æ³•æ˜¯å…¬å…±é™æ€çš„ã€‚è¿™æ„å‘³ç€å¯ä»¥é€šè¿‡<code>Singleton.HolderClass.instance</code>ç›´æ¥è®¿é—®<code>instance</code>å˜é‡ï¼Œä¹Ÿå¯ä»¥é€šè¿‡<code>Singleton.getInstance()</code>è°ƒç”¨<code>getInstance()</code>æ–¹æ³•æ¥è·å–å•ä¾‹å®ä¾‹ã€‚è¿™ç§æ–¹å¼æä¾›äº†æ›´ç®€æ´çš„è®¿é—®æ–¹å¼ï¼Œæ— éœ€æ˜¾å¼åˆ›å»ºå†…éƒ¨ç±»å®ä¾‹ã€‚</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œé™æ€å†…éƒ¨ç±»ä¸­ä¸èƒ½ç›´æ¥è®¿é—®å¤–éƒ¨ç±»çš„éé™æ€æˆå‘˜ï¼Œå› ä¸ºé™æ€å†…éƒ¨ç±»åœ¨æ²¡æœ‰å¤–éƒ¨ç±»å®ä¾‹çš„æƒ…å†µä¸‹ä¹Ÿå¯ä»¥è¢«è®¿é—®ã€‚å¦‚æœéœ€è¦è®¿é—®å¤–éƒ¨ç±»çš„éé™æ€æˆå‘˜ï¼Œå¯ä»¥é€šè¿‡åˆ›å»ºå¤–éƒ¨ç±»çš„å®ä¾‹æ¥å®ç°ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Initialization on Demand Holder</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Singleton</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">Singleton</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// ç§æœ‰æ„é€ å‡½æ•°ï¼Œé˜²æ­¢å¤–éƒ¨ç›´æ¥å®ä¾‹åŒ–å¯¹è±¡</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é™æ€å†…éƒ¨ç±»</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">HolderClass</span> &#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="type">Singleton</span> <span class="variable">instance</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Singleton</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å…¬å…±é™æ€æ–¹æ³•ï¼Œæä¾›å…¨å±€è®¿é—®ç‚¹è·å–å•ä¾‹å®ä¾‹</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> å•ä¾‹å®ä¾‹</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title function_">getInstance</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> HolderClass.instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¯¹åº”è°ƒç”¨æ–¹æ³•</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Singleton</span> <span class="variable">singleton</span> <span class="operator">=</span> Singleton.getInstance();</span><br><span class="line">        <span class="comment">// ä½¿ç”¨å•ä¾‹å¯¹è±¡</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="æ¡¥æ¥æ¨¡å¼"><a href="#æ¡¥æ¥æ¨¡å¼" class="headerlink" title="æ¡¥æ¥æ¨¡å¼"></a>æ¡¥æ¥æ¨¡å¼</h2><h3 id="ä»‹ç»-8"><a href="#ä»‹ç»-8" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h3><p>æ¡¥æ¥æ¨¡å¼æ˜¯ä¸€ç§ç»“æ„å‹è®¾è®¡æ¨¡å¼ï¼Œå®ƒæ—¨åœ¨å°†æŠ½è±¡éƒ¨åˆ†ä¸å…¶å®ç°éƒ¨åˆ†åˆ†ç¦»ï¼Œä½¿å®ƒä»¬å¯ä»¥ç‹¬ç«‹åœ°å˜åŒ–ã€‚å®ƒé€šè¿‡åˆ›å»ºä¸€ä¸ªæ¡¥æ¥æ¥å£ï¼Œå°†æŠ½è±¡å’Œå®ç°è§£è€¦ï¼Œä½¿å®ƒä»¬å¯ä»¥ç‹¬ç«‹åœ°è¿›è¡Œæ‰©å±•ã€‚</p>
<p>åœ¨æ¡¥æ¥æ¨¡å¼ä¸­ï¼Œå­˜åœ¨ä¸¤ä¸ªç»´åº¦çš„æŠ½è±¡å’Œå®ç°ï¼Œé€šè¿‡æ¡¥æ¥æ¥å£å°†å®ƒä»¬è¿æ¥èµ·æ¥ã€‚å…¶ä¸­ï¼ŒæŠ½è±¡éƒ¨åˆ†å®šä¹‰äº†é«˜å±‚çš„æŠ½è±¡æ–¹æ³•å’Œå±æ€§ï¼Œè€Œå®ç°éƒ¨åˆ†å®šä¹‰äº†å…·ä½“å®ç°çš„æ–¹æ³•å’Œå±æ€§ã€‚é€šè¿‡æ¡¥æ¥æ¥å£ï¼ŒæŠ½è±¡éƒ¨åˆ†å’Œå®ç°éƒ¨åˆ†å¯ä»¥ç‹¬ç«‹åœ°è¿›è¡Œæ‰©å±•å’Œå˜åŒ–ï¼Œè€Œå½¼æ­¤ä¹‹é—´çš„å…³ç³»é€šè¿‡æ¡¥æ¥æ¥å£æ¥å®ç°ã€‚</p>
<h3 id="ç»“æ„-8"><a href="#ç»“æ„-8" class="headerlink" title="ç»“æ„"></a>ç»“æ„</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oooooo.oss-cn-fuzhou.aliyuncs.com/img/image-20230530152030299.png" alt="image-20230530152030299"></p>
<h3 id="è§’è‰²-8"><a href="#è§’è‰²-8" class="headerlink" title="è§’è‰²"></a>è§’è‰²</h3><ul>
<li>Abstractionï¼ˆæŠ½è±¡ç±»ï¼‰</li>
<li>Refined Abstractionï¼ˆæ‰©å……æŠ½è±¡ç±»ï¼‰</li>
<li>Implementorï¼ˆå®ç°ç±»æ¥å£ï¼‰</li>
<li>Concrete Implementorï¼ˆå…·ä½“å®ç°ç±»ï¼‰</li>
</ul>
<h3 id="å®ç°-8"><a href="#å®ç°-8" class="headerlink" title="å®ç°"></a>å®ç°</h3><p><strong>ç†è§£</strong>ï¼šé€šè¿‡æ¡¥æ¥æ¨¡å¼ï¼Œå›¾åƒå®ç°ç±»ï¼ˆå¦‚ <code>LinuxImp</code>ï¼‰å’Œæ“ä½œç³»ç»Ÿå®ç°ç±»ï¼ˆå¦‚ <code>Linux</code>ï¼‰è¢«è§£è€¦ï¼Œå®ƒä»¬å¯ä»¥ç‹¬ç«‹åœ°å˜åŒ–å’Œæ‰©å±•ã€‚å›¾åƒå®ç°ç±»è´Ÿè´£å°†å›¾åƒæ•°æ®è½¬æ¢æˆç‰¹å®šæ ¼å¼ï¼ˆå¦‚åƒç´ çŸ©é˜µï¼‰ï¼Œè€Œæ“ä½œç³»ç»Ÿå®ç°ç±»è´Ÿè´£å°†åƒç´ çŸ©é˜µåœ¨ç‰¹å®šæ“ä½œç³»ç»Ÿä¸­è¿›è¡Œæ˜¾ç¤ºã€‚è¿™æ ·ï¼Œé€šè¿‡æ³¨å…¥ä¸åŒçš„å›¾åƒå®ç°ç±»å’Œæ“ä½œç³»ç»Ÿå®ç°ç±»ï¼Œå¯ä»¥å®ç°ä¸åŒå›¾åƒæ ¼å¼åœ¨ä¸åŒæ“ä½œç³»ç»Ÿä¸‹çš„æ˜¾ç¤ºï¼Œè€Œä¸éœ€è¦ä¿®æ”¹ç°æœ‰çš„ç±»ç»“æ„ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æŠ½è±¡å›¾åƒç±»ï¼Œå……å½“æŠ½è±¡ç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">Image</span> &#123;</span><br><span class="line">    <span class="keyword">protected</span> ImageImp imp;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ³¨å…¥å®ç°ç±»æ¥å£å¯¹è±¡</span></span><br><span class="line">    <span class="comment">//æ¡¥æ¥çš„å…³é”®ä½ç½®</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setImageImp</span><span class="params">(ImageImp imp)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.imp = imp;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è§£ææ–‡ä»¶</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">parseFile</span><span class="params">(String fileName)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å…·ä½“å›¾åƒç±»</span></span><br><span class="line"><span class="comment">//BMPæ ¼å¼å›¾åƒç±»ï¼Œå……å½“æ‰©å……æŠ½è±¡ç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BMPImage</span> <span class="keyword">extends</span> <span class="title class_">Image</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">parseFile</span><span class="params">(String fileName)</span> &#123;</span><br><span class="line">      <span class="comment">//æ¨¡æ‹Ÿè§£æBMPæ–‡ä»¶å¹¶è·å¾—ä¸€ä¸ªåƒç´ çŸ©é˜µå¯¹è±¡m;</span></span><br><span class="line">      <span class="type">Matrix</span> <span class="variable">m</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Matrix</span>();</span><br><span class="line">      imp.doPaint(m);</span><br><span class="line">      System.out.println(fileName + <span class="string">&quot;ï¼Œæ ¼å¼ä¸ºBMPã€‚&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//GIFæ ¼å¼å›¾åƒç±»ï¼Œå……å½“æ‰©å……æŠ½è±¡ç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GIFImage</span> <span class="keyword">extends</span> <span class="title class_">Image</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">parseFile</span><span class="params">(String fileName)</span> &#123;</span><br><span class="line">      <span class="comment">//æ¨¡æ‹Ÿè§£æGIFæ–‡ä»¶å¹¶è·å¾—ä¸€ä¸ªåƒç´ çŸ©é˜µå¯¹è±¡m;</span></span><br><span class="line">      <span class="type">Matrix</span> <span class="variable">m</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Matrix</span>();</span><br><span class="line">      imp.doPaint(m);</span><br><span class="line">      System.out.println(fileName + <span class="string">&quot;ï¼Œæ ¼å¼ä¸ºGIFã€‚&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æŠ½è±¡æ“ä½œç³»ç»Ÿå®ç°ç±»ï¼Œå……å½“å®ç°ç±»æ¥å£</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">ImageImp</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doPaint</span><span class="params">(Matrix m)</span>;  <span class="comment">//æ˜¾ç¤ºåƒç´ çŸ©é˜µm</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Linuxæ“ä½œç³»ç»Ÿå®ç°ç±»ï¼Œå……å½“å…·ä½“å®ç°ç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LinuxImp</span> <span class="keyword">implements</span> <span class="title class_">ImageImp</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doPaint</span><span class="params">(Matrix m)</span> &#123;</span><br><span class="line">  	<span class="comment">//è°ƒç”¨Linuxç³»ç»Ÿçš„ç»˜åˆ¶å‡½æ•°ç»˜åˆ¶åƒç´ çŸ©é˜µ</span></span><br><span class="line">  	System.out.print(<span class="string">&quot;åœ¨Linuxæ“ä½œç³»ç»Ÿä¸­æ˜¾ç¤ºå›¾åƒï¼š&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//åƒç´ çŸ©é˜µç±»ï¼Œè¾…åŠ©ç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Matrix</span> &#123;</span><br><span class="line">    <span class="comment">//ä»£ç çœç•¥</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="çŠ¶æ€æ¨¡å¼"><a href="#çŠ¶æ€æ¨¡å¼" class="headerlink" title="çŠ¶æ€æ¨¡å¼"></a>çŠ¶æ€æ¨¡å¼</h2><h3 id="ä»‹ç»-9"><a href="#ä»‹ç»-9" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h3><p>å®ƒå…è®¸å¯¹è±¡åœ¨å†…éƒ¨çŠ¶æ€æ”¹å˜æ—¶æ”¹å˜å…¶è¡Œä¸ºã€‚è¯¥æ¨¡å¼å°†å¯¹è±¡çš„è¡Œä¸ºå°è£…åœ¨ä¸åŒçš„çŠ¶æ€å¯¹è±¡ä¸­ï¼Œä½¿å¾—å¯¹è±¡åœ¨ä¸åŒçŠ¶æ€ä¸‹å…·æœ‰ä¸åŒçš„è¡Œä¸ºï¼ŒåŒæ—¶å°†çŠ¶æ€çš„åˆ‡æ¢å’Œè¡Œä¸ºçš„æ‰§è¡Œè§£è€¦ã€‚</p>
<h3 id="ç»“æ„-9"><a href="#ç»“æ„-9" class="headerlink" title="ç»“æ„"></a>ç»“æ„</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oooooo.oss-cn-fuzhou.aliyuncs.com/img/image-20230531170222824.png" alt="image-20230531170222824"></p>
<h3 id="è§’è‰²-9"><a href="#è§’è‰²-9" class="headerlink" title="è§’è‰²"></a>è§’è‰²</h3><ul>
<li><p>Contextï¼ˆç¯å¢ƒç±»ï¼‰</p>
</li>
<li><p>Stateï¼ˆæŠ½è±¡çŠ¶æ€ç±»ï¼‰</p>
</li>
<li><p>Concrete Stateï¼ˆå…·ä½“çŠ¶æ€ç±»ï¼‰</p>
</li>
</ul>
<h3 id="å®ç°-9"><a href="#å®ç°-9" class="headerlink" title="å®ç°"></a>å®ç°</h3><p>å…·ä½“çš„çŠ¶æ€è½¬æ¢é€»è¾‘ä½äºå…·ä½“çŠ¶æ€ç±»ä¸­ï¼Œæ¯ä¸ªçŠ¶æ€ç±»è´Ÿè´£è‡ªå·±çš„çŠ¶æ€è½¬æ¢å’Œç›¸åº”çš„æ“ä½œ</p>
<p>é‚„æœ‰å¦å¤–å¹¾ç¨®ç‹€æ…‹é¡çš„è½‰æ›æ–¹å¼ åªæä¾›å°å°æ‡‰è½‰æ›æ–¹å¼ä»£ç¢¼</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æŠ½è±¡é–‹é—œå°è±¡</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">SwitchState</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">on</span><span class="params">(Switch s)</span>;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">off</span><span class="params">(Switch s)</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å…·é«”é–‹é—œå°è±¡</span></span><br><span class="line"><span class="comment">// æ–¹æ³•ä¸­æœƒå‚³å…¥ä¸€å€‹å°è±¡ å¹¶ä¿®æ”¹è©²å°è±¡çš„currentstate</span></span><br><span class="line"><span class="comment">// å…·é«”ä»£ç¢¼å¯è¦‹switch</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//æ‰“å¼€çŠ¶æ€ç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OnState</span> <span class="keyword">extends</span> <span class="title class_">SwitchState</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">on</span><span class="params">(Switch s)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;å·²ç»æ‰“å¼€ï¼&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">off</span><span class="params">(Switch s)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;å…³é—­ï¼&quot;</span>);</span><br><span class="line">        s.setState(Switch.getState(<span class="string">&quot;off&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//å…³é—­çŠ¶æ€ç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OffState</span> <span class="keyword">extends</span> <span class="title class_">SwitchState</span>&#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">on</span><span class="params">(Switch s)</span> &#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;æ‰“å¼€ï¼&quot;</span>);</span><br><span class="line">		s.setState(Switch.getState(<span class="string">&quot;on&quot;</span>));</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">off</span><span class="params">(Switch s)</span> &#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;å·²ç»å…³é—­ï¼&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Switch</span> &#123;</span><br><span class="line">	<span class="comment">//å®šä¹‰ä¸‰ä¸ªé™æ€çš„çŠ¶æ€å¯¹è±¡ æ‰€æœ‰çš„å¼€å…³å¯¹è±¡å…±äº«çŠ¶æ€</span></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> SwitchState currentState,onState,offState;</span><br><span class="line">	<span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// æ„é€ å‡½æ•° é»˜è®¤çŠ¶æ€ä¸ºå¼€å¯</span></span><br><span class="line">	<span class="keyword">public</span> <span class="title function_">Switch</span><span class="params">(String name)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.name = name;</span><br><span class="line">		onState = <span class="keyword">new</span> <span class="title class_">OnState</span>();</span><br><span class="line">		offState = <span class="keyword">new</span> <span class="title class_">OffState</span>();</span><br><span class="line">		currentState = onState;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è©²æ–¹æ³•æœƒè¢«ç‹€æ…‹æ–¹æ³•é€²è¡Œèª¿ç”¨</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setState</span><span class="params">(SwitchState state)</span> &#123;</span><br><span class="line">		currentState = state;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> SwitchState <span class="title function_">getState</span><span class="params">(String type)</span> &#123;</span><br><span class="line">		<span class="keyword">if</span> (type.equalsIgnoreCase(<span class="string">&quot;on&quot;</span>)) &#123;</span><br><span class="line">			<span class="keyword">return</span> onState;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> &#123;</span><br><span class="line">			<span class="keyword">return</span> offState;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//ä¸‹é¢å…©å€‹æ–¹æ³•æœƒå°‡ç•¶å‰å°è±¡å‚³å…¥ è‹¥ç‹€æ…‹æ”¹è®Šå‰‡æœƒå°å°cuurenté€²è¡Œä¿®æ”¹</span></span><br><span class="line">    <span class="comment">//æ‰“å¼€å¼€å…³</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">on</span><span class="params">()</span> &#123;</span><br><span class="line">		System.out.print(name);</span><br><span class="line">		currentState.on(<span class="built_in">this</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//å…³é—­å¼€å…³</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">off</span><span class="params">()</span> &#123;</span><br><span class="line">		System.out.print(name);</span><br><span class="line">		currentState.off(<span class="built_in">this</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="å…¶é¤˜è½‰æ›æ–¹å¼å¯¦ç¾"><a href="#å…¶é¤˜è½‰æ›æ–¹å¼å¯¦ç¾" class="headerlink" title="å…¶é¤˜è½‰æ›æ–¹å¼å¯¦ç¾"></a>å…¶é¤˜è½‰æ›æ–¹å¼å¯¦ç¾</h3><ul>
<li>æ”¾å¤§é¡</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//åœ¨ç’°å¢ƒé¡ä¸­é€²è¡Œè½‰æ›</span></span><br><span class="line"><span class="comment">//å±å¹•ç±»ï¼šç¯å¢ƒç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Screen</span> &#123;</span><br><span class="line">	<span class="comment">//æšä¸¾æ‰€æœ‰çš„çŠ¶æ€ï¼ŒcurrentStateè¡¨ç¤ºå½“å‰çŠ¶æ€</span></span><br><span class="line">	<span class="keyword">private</span> ScreenState currentState, normalState, largerState, largestState;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="title function_">Screen</span><span class="params">()</span> &#123;</span><br><span class="line">  	<span class="built_in">this</span>.normalState = <span class="keyword">new</span> <span class="title class_">NormalState</span>(); <span class="comment">//åˆ›å»ºæ­£å¸¸çŠ¶æ€å¯¹è±¡</span></span><br><span class="line">  	<span class="built_in">this</span>.largerState = <span class="keyword">new</span> <span class="title class_">LargerState</span>(); <span class="comment">//åˆ›å»ºäºŒå€æ”¾å¤§çŠ¶æ€å¯¹è±¡</span></span><br><span class="line">  	<span class="built_in">this</span>.largestState = <span class="keyword">new</span> <span class="title class_">LargestState</span>(); <span class="comment">//åˆ›å»ºå››å€æ”¾å¤§çŠ¶æ€å¯¹è±¡</span></span><br><span class="line">  	<span class="built_in">this</span>.currentState = normalState; <span class="comment">//è®¾ç½®åˆå§‹çŠ¶æ€</span></span><br><span class="line">  	<span class="built_in">this</span>.currentState.display();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setState</span><span class="params">(ScreenState state)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.currentState = state;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//å•å‡»äº‹ä»¶å¤„ç†æ–¹æ³•ï¼Œå°è½¬äº†å¯¹çŠ¶æ€ç±»ä¸­ä¸šåŠ¡æ–¹æ³•çš„è°ƒç”¨å’ŒçŠ¶æ€çš„è½¬æ¢</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">()</span> &#123;</span><br><span class="line">	  	<span class="keyword">if</span> (<span class="built_in">this</span>.currentState == normalState) &#123;</span><br><span class="line">	  		<span class="built_in">this</span>.setState(largerState);</span><br><span class="line">	  		<span class="built_in">this</span>.currentState.display();</span><br><span class="line">	  	&#125;</span><br><span class="line">	  	<span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">this</span>.currentState == largerState) &#123;</span><br><span class="line">	  		<span class="built_in">this</span>.setState(largestState);</span><br><span class="line">	  		<span class="built_in">this</span>.currentState.display();</span><br><span class="line">	  	&#125;</span><br><span class="line">	  	<span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">this</span>.currentState == largestState) &#123;</span><br><span class="line">	  		<span class="built_in">this</span>.setState(normalState);</span><br><span class="line">	  		<span class="built_in">this</span>.currentState.display();</span><br><span class="line">	  	&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>éŠ€è¡Œè³¬æˆ¶</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//é“¶è¡Œè´¦æˆ·ï¼šç¯å¢ƒç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Account</span> &#123;</span><br><span class="line">	<span class="keyword">private</span> AccountState state; <span class="comment">//ç»´æŒä¸€ä¸ªå¯¹æŠ½è±¡çŠ¶æ€å¯¹è±¡çš„å¼•ç”¨</span></span><br><span class="line">	<span class="keyword">private</span> String owner; <span class="comment">//å¼€æˆ·å</span></span><br><span class="line">	<span class="keyword">private</span> <span class="type">double</span> <span class="variable">balance</span> <span class="operator">=</span> <span class="number">0</span>; <span class="comment">//è´¦æˆ·ä½™é¢</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="title function_">Account</span><span class="params">(String owner,<span class="type">double</span> init)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.owner = owner;</span><br><span class="line">		<span class="built_in">this</span>.balance = balance;</span><br><span class="line">		<span class="built_in">this</span>.state = <span class="keyword">new</span> <span class="title class_">NormalState</span>(<span class="built_in">this</span>); <span class="comment">//è®¾ç½®åˆå§‹çŠ¶æ€</span></span><br><span class="line">		System.out.println(<span class="built_in">this</span>.owner + <span class="string">&quot;å¼€æˆ·ï¼Œåˆå§‹é‡‘é¢ä¸º&quot;</span> + init);</span><br><span class="line">		System.out.println(<span class="string">&quot;---------------------------------------------&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="type">double</span> <span class="title function_">getBalance</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="built_in">this</span>.balance;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setBalance</span><span class="params">(<span class="type">double</span> balance)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.balance = balance;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setState</span><span class="params">(AccountState state)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.state = state;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deposit</span><span class="params">(<span class="type">double</span> amount)</span> &#123;</span><br><span class="line">		System.out.println(<span class="built_in">this</span>.owner + <span class="string">&quot;å­˜æ¬¾&quot;</span> + amount);</span><br><span class="line">		state.deposit(amount); <span class="comment">//è°ƒç”¨çŠ¶æ€å¯¹è±¡çš„deposit()æ–¹æ³•</span></span><br><span class="line">		System.out.println(<span class="string">&quot;ç°åœ¨ä½™é¢ä¸º&quot;</span>+ <span class="built_in">this</span>.balance);</span><br><span class="line">		System.out.println(<span class="string">&quot;ç°åœ¨å¸æˆ·çŠ¶æ€ä¸º&quot;</span>+ <span class="built_in">this</span>.state.getClass().getName());</span><br><span class="line">		System.out.println(<span class="string">&quot;---------------------------------------------&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">withdraw</span><span class="params">(<span class="type">double</span> amount)</span> &#123;</span><br><span class="line">		System.out.println(<span class="built_in">this</span>.owner + <span class="string">&quot;å–æ¬¾&quot;</span> + amount);</span><br><span class="line">		state.withdraw(amount); <span class="comment">//è°ƒç”¨çŠ¶æ€å¯¹è±¡çš„withdraw()æ–¹æ³•</span></span><br><span class="line">		System.out.println(<span class="string">&quot;ç°åœ¨ä½™é¢ä¸º&quot;</span>+ <span class="built_in">this</span>.balance);</span><br><span class="line">		System.out.println(<span class="string">&quot;ç°åœ¨å¸æˆ·çŠ¶æ€ä¸º&quot;</span>+ <span class="built_in">this</span>. state.getClass().getName());</span><br><span class="line">		System.out.println(<span class="string">&quot;---------------------------------------------&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">computeInterest</span><span class="params">()</span></span><br><span class="line">	&#123;</span><br><span class="line">		state.computeInterest(); <span class="comment">//è°ƒç”¨çŠ¶æ€å¯¹è±¡çš„computeInterest()æ–¹æ³•</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æŠ½è±¡çŠ¶æ€ç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">AccountState</span> &#123;</span><br><span class="line">	<span class="keyword">protected</span> Account acc;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">deposit</span><span class="params">(<span class="type">double</span> amount)</span>;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">withdraw</span><span class="params">(<span class="type">double</span> amount)</span>;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">computeInterest</span><span class="params">()</span>;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">stateCheck</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ­£å¸¸çŠ¶æ€ï¼šå…·ä½“çŠ¶æ€ç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">NormalState</span> <span class="keyword">extends</span> <span class="title class_">AccountState</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="title function_">NormalState</span><span class="params">(Account acc)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.acc = acc;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="title function_">NormalState</span><span class="params">(AccountState state)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.acc = state.acc;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deposit</span><span class="params">(<span class="type">double</span> amount)</span> &#123;</span><br><span class="line">		acc.setBalance(acc.getBalance() + amount);</span><br><span class="line">		stateCheck();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">withdraw</span><span class="params">(<span class="type">double</span> amount)</span> &#123;</span><br><span class="line">		acc.setBalance(acc.getBalance() - amount);</span><br><span class="line">		stateCheck();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">computeInterest</span><span class="params">()</span></span><br><span class="line">	&#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;æ­£å¸¸çŠ¶æ€ï¼Œæ— é¡»æ”¯ä»˜åˆ©æ¯ï¼&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//çŠ¶æ€è½¬æ¢</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">stateCheck</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">if</span> (acc.getBalance() &gt; -<span class="number">2000</span> &amp;&amp; acc.getBalance() &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">			acc.setState(<span class="keyword">new</span> <span class="title class_">OverdraftState</span>(<span class="built_in">this</span>));</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (acc.getBalance() == -<span class="number">2000</span>) &#123;</span><br><span class="line">			acc.setState(<span class="keyword">new</span> <span class="title class_">RestrictedState</span>(<span class="built_in">this</span>));</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (acc.getBalance() &lt; -<span class="number">2000</span>) &#123;</span><br><span class="line">			System.out.println(<span class="string">&quot;æ“ä½œå—é™ï¼&quot;</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//é€æ”¯çŠ¶æ€ï¼šå…·ä½“çŠ¶æ€ç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OverdraftState</span> <span class="keyword">extends</span> <span class="title class_">AccountState</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="title function_">OverdraftState</span><span class="params">(AccountState state)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.acc = state.acc;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deposit</span><span class="params">(<span class="type">double</span> amount)</span> &#123;</span><br><span class="line">		acc.setBalance(acc.getBalance() + amount);</span><br><span class="line">		stateCheck();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">withdraw</span><span class="params">(<span class="type">double</span> amount)</span> &#123;</span><br><span class="line">		acc.setBalance(acc.getBalance() - amount);</span><br><span class="line">		stateCheck();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">computeInterest</span><span class="params">()</span> &#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;è®¡ç®—åˆ©æ¯ï¼&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//çŠ¶æ€è½¬æ¢</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">stateCheck</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">if</span> (acc.getBalance() &gt; <span class="number">0</span>) &#123;</span><br><span class="line">			acc.setState(<span class="keyword">new</span> <span class="title class_">NormalState</span>(<span class="built_in">this</span>));</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (acc.getBalance() == -<span class="number">2000</span>) &#123;</span><br><span class="line">			acc.setState(<span class="keyword">new</span> <span class="title class_">RestrictedState</span>(<span class="built_in">this</span>));</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (acc.getBalance() &lt; -<span class="number">2000</span>) &#123;</span><br><span class="line">			System.out.println(<span class="string">&quot;æ“ä½œå—é™ï¼&quot;</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å—é™çŠ¶æ€ï¼šå…·ä½“çŠ¶æ€ç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RestrictedState</span> <span class="keyword">extends</span> <span class="title class_">AccountState</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="title function_">RestrictedState</span><span class="params">(AccountState state)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.acc = state.acc;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deposit</span><span class="params">(<span class="type">double</span> amount)</span> &#123;</span><br><span class="line">		acc.setBalance(acc.getBalance() + amount);</span><br><span class="line">		stateCheck();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">withdraw</span><span class="params">(<span class="type">double</span> amount)</span> &#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;å¸å·å—é™ï¼Œå–æ¬¾å¤±è´¥&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">computeInterest</span><span class="params">()</span> &#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;è®¡ç®—åˆ©æ¯ï¼&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//çŠ¶æ€è½¬æ¢</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">stateCheck</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">if</span>(acc.getBalance() &gt; <span class="number">0</span>) &#123;</span><br><span class="line">			acc.setState(<span class="keyword">new</span> <span class="title class_">NormalState</span>(<span class="built_in">this</span>));</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span>(acc.getBalance() &gt; -<span class="number">2000</span>) &#123;</span><br><span class="line">			acc.setState(<span class="keyword">new</span> <span class="title class_">OverdraftState</span>(<span class="built_in">this</span>));</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Client</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String args[])</span> &#123;</span><br><span class="line">		<span class="type">Account</span> <span class="variable">acc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Account</span>(<span class="string">&quot;æ®µèª‰&quot;</span>,<span class="number">0.0</span>);</span><br><span class="line">		acc.deposit(<span class="number">1000</span>);</span><br><span class="line">		acc.withdraw(<span class="number">2000</span>);</span><br><span class="line">		acc.deposit(<span class="number">3000</span>);</span><br><span class="line">		acc.withdraw(<span class="number">4000</span>);</span><br><span class="line">		acc.withdraw(<span class="number">1000</span>);</span><br><span class="line">		acc.computeInterest();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="å‘½ä»¤æ¨¡å¼"><a href="#å‘½ä»¤æ¨¡å¼" class="headerlink" title="å‘½ä»¤æ¨¡å¼"></a>å‘½ä»¤æ¨¡å¼</h2><h3 id="ä»‹ç»-10"><a href="#ä»‹ç»-10" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h3><p>å‘½ä»¤æ¨¡å¼ï¼ˆCommand Patternï¼‰ç”¨äºå°†è¯·æ±‚ï¼ˆå‘½ä»¤ï¼‰å°è£…æˆä¸€ä¸ªå¯¹è±¡ï¼Œä½¿å¾—å¯ä»¥å°†ä¸åŒçš„è¯·æ±‚å‚æ•°åŒ–å¹¶ä¸”æ”¯æŒè¯·æ±‚çš„æ’é˜Ÿã€è®°å½•æ—¥å¿—ã€æ’¤é”€ç­‰æ“ä½œ</p>
<h3 id="ç»“æ„-10"><a href="#ç»“æ„-10" class="headerlink" title="ç»“æ„"></a>ç»“æ„</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oooooo.oss-cn-fuzhou.aliyuncs.com/img/image-20230531111839798.png" alt="image-20230531111839798"></p>
<h3 id="è§’è‰²-10"><a href="#è§’è‰²-10" class="headerlink" title="è§’è‰²"></a>è§’è‰²</h3><ul>
<li>å‘½ä»¤æ¥å£ï¼ˆCommandï¼‰</li>
<li>å…·ä½“å‘½ä»¤ï¼ˆConcrete Commandï¼‰</li>
<li>å‘½ä»¤æ¥æ”¶è€…ï¼ˆReceiverï¼‰</li>
<li>å‘½ä»¤å‘èµ·è€…ï¼ˆInvokerï¼‰</li>
</ul>
<h3 id="å®ç°-10"><a href="#å®ç°-10" class="headerlink" title="å®ç°"></a>å®ç°</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//	æŠ½è±¡å‘½ä»¤</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">Command</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">execute</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å…·ä½“å‘½ä»¤</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å¸®åŠ©</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelpCommand</span> <span class="keyword">extends</span> <span class="title class_">Command</span> &#123;</span><br><span class="line">	<span class="keyword">private</span> DisplayHelpClass hcObj;   <span class="comment">//ç»´æŒå¯¹è¯·æ±‚æ¥æ”¶è€…çš„å¼•ç”¨</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="title function_">HelpCommand</span><span class="params">()</span> &#123;</span><br><span class="line">		hcObj = <span class="keyword">new</span> <span class="title class_">DisplayHelpClass</span>();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//å‘½ä»¤æ‰§è¡Œæ–¹æ³•ï¼Œå°†è°ƒç”¨è¯·æ±‚æ¥æ”¶è€…çš„ä¸šåŠ¡æ–¹æ³•</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">execute</span><span class="params">()</span> &#123;</span><br><span class="line">		hcObj.display();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é€€å‡º</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ExitCommand</span> <span class="keyword">extends</span> <span class="title class_">Command</span> &#123;</span><br><span class="line">	<span class="keyword">private</span> SystemExitClass seObj;  <span class="comment">//ç»´æŒå¯¹è¯·æ±‚æ¥æ”¶è€…çš„å¼•ç”¨</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="title function_">ExitCommand</span><span class="params">()</span> &#123;</span><br><span class="line">		seObj = <span class="keyword">new</span> <span class="title class_">SystemExitClass</span>();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//å‘½ä»¤æ‰§è¡Œæ–¹æ³•ï¼Œå°†è°ƒç”¨è¯·æ±‚æ¥æ”¶è€…çš„ä¸šåŠ¡æ–¹æ³•</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">execute</span><span class="params">()</span> &#123;</span><br><span class="line">		seObj.exit();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ¥æ”¶è€…</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DisplayHelpClass</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">display</span><span class="params">()</span> &#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;æ˜¾ç¤ºå¸®åŠ©æ–‡æ¡£ï¼&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SystemExitClass</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">exit</span><span class="params">()</span> &#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;é€€å‡ºç³»ç»Ÿï¼&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è°ƒç”¨è€…</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FunctionButton</span> &#123;</span><br><span class="line">	<span class="keyword">private</span> Command command;  <span class="comment">//ç»´æŒä¸€ä¸ªæŠ½è±¡å‘½ä»¤å¯¹è±¡çš„å¼•ç”¨</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//ä¸ºåŠŸèƒ½é”®æ³¨å…¥å‘½ä»¤</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCommand</span><span class="params">(Command command)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.command = command;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//å‘é€è¯·æ±‚çš„æ–¹æ³•</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">click</span><span class="params">()</span> &#123;</span><br><span class="line">		System.out.print(<span class="string">&quot;å•å‡»åŠŸèƒ½é”®: &quot;</span>);</span><br><span class="line">		command.execute();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å®¢æˆ·ç«¯</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Client</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String args[])</span> &#123;</span><br><span class="line"></span><br><span class="line">		<span class="type">FunctionButton</span> <span class="variable">fb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FunctionButton</span>();</span><br><span class="line"></span><br><span class="line">		Command command; <span class="comment">//å®šä¹‰å‘½ä»¤å¯¹è±¡</span></span><br><span class="line">		command = (Command)XMLUtil.getBean(); <span class="comment">//è¯»å–é…ç½®æ–‡ä»¶ï¼Œåå°„ç”Ÿæˆå¯¹è±¡</span></span><br><span class="line"></span><br><span class="line">		fb.setCommand(command); <span class="comment">//å°†å‘½ä»¤å¯¹è±¡æ³¨å…¥åŠŸèƒ½é”®</span></span><br><span class="line">		fb.click(); <span class="comment">//è°ƒç”¨åŠŸèƒ½é”®çš„ä¸šåŠ¡æ–¹æ³•</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="çµ„åˆæ¨¡å¼"><a href="#çµ„åˆæ¨¡å¼" class="headerlink" title="çµ„åˆæ¨¡å¼"></a>çµ„åˆæ¨¡å¼</h2><h3 id="ä»‹ç´¹"><a href="#ä»‹ç´¹" class="headerlink" title="ä»‹ç´¹"></a>ä»‹ç´¹</h3><p>ç»„åˆæ¨¡å¼æ˜¯ä¸€ç§ç»“æ„å‹è®¾è®¡æ¨¡å¼ï¼Œç”¨äºå°†å¯¹è±¡ç»„åˆæˆæ ‘å½¢ç»“æ„ä»¥è¡¨ç¤ºâ€éƒ¨åˆ†-æ•´ä½“â€çš„å±‚æ¬¡å…³ç³»ï¼Œä½¿å¾—ç”¨æˆ·å¯¹å•ä¸ªå¯¹è±¡å’Œç»„åˆå¯¹è±¡çš„ä½¿ç”¨å…·æœ‰ä¸€è‡´æ€§ã€‚</p>
<h3 id="çµæ§‹"><a href="#çµæ§‹" class="headerlink" title="çµæ§‹"></a>çµæ§‹</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oooooo.oss-cn-fuzhou.aliyuncs.com/img/image-20230531172221176.png" alt="image-20230531172221176"></p>
<h3 id="è§’è‰²-11"><a href="#è§’è‰²-11" class="headerlink" title="è§’è‰²"></a>è§’è‰²</h3><ul>
<li>ç»„ä»¶ï¼ˆComponentï¼‰ï¼šæ˜¯ç»„åˆä¸­çš„æŠ½è±¡åŸºç±»ï¼Œå®šä¹‰äº†ç»„åˆå¯¹è±¡å’Œå¶å­å¯¹è±¡çš„å…±æœ‰æ“ä½œæ¥å£ã€‚å®ƒå¯ä»¥æ˜¯æŠ½è±¡ç±»æˆ–æ¥å£ï¼Œå£°æ˜äº†ä¸€äº›ç”¨äºç®¡ç†å­å¯¹è±¡çš„æ–¹æ³•ï¼Œä¾‹å¦‚æ·»åŠ ã€åˆ é™¤ã€è·å–å­å¯¹è±¡ç­‰ã€‚</li>
<li>å¶å­ï¼ˆLeafï¼‰ï¼šæ˜¯ç»„åˆä¸­çš„å¶å­èŠ‚ç‚¹ï¼Œè¡¨ç¤ºç»„åˆå¯¹è±¡ä¸­çš„åŸºæœ¬å…ƒç´ ï¼Œå®ƒæ²¡æœ‰å­å¯¹è±¡ã€‚</li>
<li>å®¹å™¨ï¼ˆCompositeï¼‰ï¼šæ˜¯ç»„åˆä¸­çš„å®¹å™¨èŠ‚ç‚¹ï¼Œè¡¨ç¤ºå¯ä»¥åŒ…å«å­å¯¹è±¡çš„å¤æ‚å¯¹è±¡ã€‚å®¹å™¨å¯¹è±¡ä¸­é€šå¸¸ä¼šæŒæœ‰ä¸€ä¸ªæˆ–å¤šä¸ªå­å¯¹è±¡ï¼Œå¹¶å®ç°ç»„åˆå¯¹è±¡çš„å…±æœ‰æ“ä½œæ¥å£ã€‚å®¹å™¨å¯¹è±¡çš„æ“ä½œä¼šé€’å½’åœ°è°ƒç”¨å­å¯¹è±¡çš„æ“ä½œï¼Œä»¥å®ç°å¯¹æ•´ä¸ªæ ‘å½¢ç»“æ„çš„æ“ä½œã€‚</li>
<li>å®¢æˆ·ç«¯ï¼ˆClientï¼‰ï¼šé€šè¿‡ç»„åˆå¯¹è±¡çš„æ“ä½œæ¥å£æ¥æ“ä½œç»„åˆå¯¹è±¡å’Œå¶å­å¯¹è±¡ã€‚</li>
</ul>
<h3 id="å¯¦ç¾"><a href="#å¯¦ç¾" class="headerlink" title="å¯¦ç¾"></a>å¯¦ç¾</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//çµ„ä»¶</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">AbstractFile</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(AbstractFile file)</span>;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">remove</span><span class="params">(AbstractFile file)</span>;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">abstract</span> AbstractFile <span class="title function_">getChild</span><span class="params">(<span class="type">int</span> i)</span>;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">killVirus</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å®¹å™¨</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Folder</span> <span class="keyword">extends</span> <span class="title class_">AbstractFile</span> &#123;</span><br><span class="line">	<span class="comment">//å®šä¹‰é›†åˆfileListï¼Œç”¨äºå­˜å‚¨AbstractFileç±»å‹çš„æˆå‘˜</span></span><br><span class="line">	<span class="keyword">private</span> ArrayList&lt;AbstractFile&gt; fileList=<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;AbstractFile&gt;();</span><br><span class="line">	<span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="title function_">Folder</span><span class="params">(String name)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.name = name;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(AbstractFile file)</span> &#123;</span><br><span class="line">	   fileList.add(file);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">remove</span><span class="params">(AbstractFile file)</span> &#123;</span><br><span class="line">		fileList.remove(file);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> AbstractFile <span class="title function_">getChild</span><span class="params">(<span class="type">int</span> i)</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> (AbstractFile)fileList.get(i);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">killVirus</span><span class="params">()</span> &#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;****å¯¹æ–‡ä»¶å¤¹&#x27;&quot;</span> + name + <span class="string">&quot;&#x27;è¿›è¡Œæ€æ¯’&quot;</span>);  <span class="comment">//æ¨¡æ‹Ÿæ€æ¯’</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">//é€’å½’è°ƒç”¨æˆå‘˜æ„ä»¶çš„killVirus()æ–¹æ³•</span></span><br><span class="line">		<span class="keyword">for</span>(Object obj : fileList) &#123;</span><br><span class="line">			((AbstractFile)obj).killVirus();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è‘‰å­</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//ImageFile</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ImageFile</span> <span class="keyword">extends</span> <span class="title class_">AbstractFile</span> &#123;</span><br><span class="line">	<span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="title function_">ImageFile</span><span class="params">(String name)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.name = name;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(AbstractFile file)</span> &#123;</span><br><span class="line">	   System.out.println(<span class="string">&quot;å¯¹ä¸èµ·ï¼Œä¸æ”¯æŒè¯¥æ–¹æ³•ï¼&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">remove</span><span class="params">(AbstractFile file)</span> &#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;å¯¹ä¸èµ·ï¼Œä¸æ”¯æŒè¯¥æ–¹æ³•ï¼&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> AbstractFile <span class="title function_">getChild</span><span class="params">(<span class="type">int</span> i)</span> &#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;å¯¹ä¸èµ·ï¼Œä¸æ”¯æŒè¯¥æ–¹æ³•ï¼&quot;</span>);</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">killVirus</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="comment">//æ¨¡æ‹Ÿæ€æ¯’</span></span><br><span class="line">		System.out.println(<span class="string">&quot;----å¯¹å›¾åƒæ–‡ä»¶&#x27;&quot;</span> + name + <span class="string">&quot;&#x27;è¿›è¡Œæ€æ¯’&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//TextFile</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TextFile</span> <span class="keyword">extends</span> <span class="title class_">AbstractFile</span> &#123;</span><br><span class="line">	<span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="title function_">TextFile</span><span class="params">(String name)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.name = name;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(AbstractFile file)</span> &#123;</span><br><span class="line">	   System.out.println(<span class="string">&quot;å¯¹ä¸èµ·ï¼Œä¸æ”¯æŒè¯¥æ–¹æ³•ï¼&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">remove</span><span class="params">(AbstractFile file)</span> &#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;å¯¹ä¸èµ·ï¼Œä¸æ”¯æŒè¯¥æ–¹æ³•ï¼&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> AbstractFile <span class="title function_">getChild</span><span class="params">(<span class="type">int</span> i)</span> &#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;å¯¹ä¸èµ·ï¼Œä¸æ”¯æŒè¯¥æ–¹æ³•ï¼&quot;</span>);</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">killVirus</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="comment">//æ¨¡æ‹Ÿæ€æ¯’</span></span><br><span class="line">		System.out.println(<span class="string">&quot;----å¯¹æ–‡æœ¬æ–‡ä»¶&#x27;&quot;</span> + name + <span class="string">&quot;&#x27;è¿›è¡Œæ€æ¯’&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//VideoFile</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">VideoFile</span> <span class="keyword">extends</span> <span class="title class_">AbstractFile</span> &#123;</span><br><span class="line">	<span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="title function_">VideoFile</span><span class="params">(String name)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.name = name;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(AbstractFile file)</span> &#123;</span><br><span class="line">	   System.out.println(<span class="string">&quot;å¯¹ä¸èµ·ï¼Œä¸æ”¯æŒè¯¥æ–¹æ³•ï¼&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">remove</span><span class="params">(AbstractFile file)</span> &#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;å¯¹ä¸èµ·ï¼Œä¸æ”¯æŒè¯¥æ–¹æ³•ï¼&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> AbstractFile <span class="title function_">getChild</span><span class="params">(<span class="type">int</span> i)</span> &#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;å¯¹ä¸èµ·ï¼Œä¸æ”¯æŒè¯¥æ–¹æ³•ï¼&quot;</span>);</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">killVirus</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="comment">//æ¨¡æ‹Ÿæ€æ¯’</span></span><br><span class="line">		System.out.println(<span class="string">&quot;----å¯¹è§†é¢‘æ–‡ä»¶&#x27;&quot;</span> + name + <span class="string">&quot;&#x27;è¿›è¡Œæ€æ¯’&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å®¢æˆ¶ç«¯</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Client</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String args[])</span> &#123;</span><br><span class="line">        <span class="comment">//é’ˆå¯¹æŠ½è±¡æ„ä»¶ç¼–ç¨‹</span></span><br><span class="line">		AbstractFile file1,file2,file3,file4,file5,folder1,folder2,folder3,folder4;</span><br><span class="line"></span><br><span class="line">		folder1 = <span class="keyword">new</span> <span class="title class_">Folder</span>(<span class="string">&quot;Sunnyçš„èµ„æ–™&quot;</span>);</span><br><span class="line">		folder2 = <span class="keyword">new</span> <span class="title class_">Folder</span>(<span class="string">&quot;å›¾åƒæ–‡ä»¶&quot;</span>);</span><br><span class="line">		folder3 = <span class="keyword">new</span> <span class="title class_">Folder</span>(<span class="string">&quot;æ–‡æœ¬æ–‡ä»¶&quot;</span>);</span><br><span class="line">		folder4 = <span class="keyword">new</span> <span class="title class_">Folder</span>(<span class="string">&quot;è§†é¢‘æ–‡ä»¶&quot;</span>);</span><br><span class="line"></span><br><span class="line">		file1 = <span class="keyword">new</span> <span class="title class_">ImageFile</span>(<span class="string">&quot;å°é¾™å¥³.jpg&quot;</span>);</span><br><span class="line">		file2 = <span class="keyword">new</span> <span class="title class_">ImageFile</span>(<span class="string">&quot;å¼ æ— å¿Œ.gif&quot;</span>);</span><br><span class="line">		file3 = <span class="keyword">new</span> <span class="title class_">TextFile</span>(<span class="string">&quot;ä¹é˜´çœŸç».txt&quot;</span>);</span><br><span class="line">		file4 = <span class="keyword">new</span> <span class="title class_">TextFile</span>(<span class="string">&quot;è‘µèŠ±å®å…¸.doc&quot;</span>);</span><br><span class="line">		file5 = <span class="keyword">new</span> <span class="title class_">VideoFile</span>(<span class="string">&quot;ç¬‘å‚²æ±Ÿæ¹–.rmvb&quot;</span>);</span><br><span class="line"></span><br><span class="line">		folder2.add(file1);</span><br><span class="line">		folder2.add(file2);</span><br><span class="line">		folder3.add(file3);</span><br><span class="line">		folder3.add(file4);</span><br><span class="line">		folder4.add(file5);</span><br><span class="line"></span><br><span class="line">		folder1.add(folder2);</span><br><span class="line">		folder1.add(folder3);</span><br><span class="line">		folder1.add(folder4);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//ä»â€œSunnyçš„èµ„æ–™â€ç»“ç‚¹å¼€å§‹è¿›è¡Œæ€æ¯’æ“ä½œ</span></span><br><span class="line">		folder1.killVirus();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="æ¨¡å¼ï¼ˆæ¨¡æ¿ï¼‰"><a href="#æ¨¡å¼ï¼ˆæ¨¡æ¿ï¼‰" class="headerlink" title="æ¨¡å¼ï¼ˆæ¨¡æ¿ï¼‰"></a>æ¨¡å¼ï¼ˆæ¨¡æ¿ï¼‰</h2><h3 id="ä»‹ç´¹-1"><a href="#ä»‹ç´¹-1" class="headerlink" title="ä»‹ç´¹"></a>ä»‹ç´¹</h3><h3 id="çµæ§‹-1"><a href="#çµæ§‹-1" class="headerlink" title="çµæ§‹"></a>çµæ§‹</h3><h3 id="è§’è‰²-12"><a href="#è§’è‰²-12" class="headerlink" title="è§’è‰²"></a>è§’è‰²</h3><h3 id="å¯¦ç¾-1"><a href="#å¯¦ç¾-1" class="headerlink" title="å¯¦ç¾"></a>å¯¦ç¾</h3></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>æ–‡ç« ä½œè€…: </span><span class="post-copyright-info"><a href="https://rieraa.github.io">rieraa</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>æ–‡ç« é“¾æ¥: </span><span class="post-copyright-info"><a href="https://rieraa.github.io/post/364ea8cc.html">https://rieraa.github.io/post/364ea8cc.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>ç‰ˆæƒå£°æ˜: </span><span class="post-copyright-info">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜æ¥è‡ª <a href="https://rieraa.github.io" target="_blank"></a>ï¼</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/java/">java</a><a class="post-meta__tags" href="/tags/designPattern/">designPattern</a></div><div class="post_share"><div class="social-share" data-image="/img/avatar.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/post/54b11a0c.html" title="Promise"><div class="cover" style="background: linear-gradient(20deg, #001f3f, #1f3b69, #820224)"></div><div class="pagination-info"><div class="label">ä¸Šä¸€ç¯‡</div><div class="prev_info">Promise</div></div></a></div><div class="next-post pull-right"><a href="/post/dec4cd8f.html" title="æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆ"><div class="cover" style="background: linear-gradient(20deg, rgba(0, 128, 128, 0.6), rgba(255, 0, 0, 0.6), rgba(128, 0, 128, 0.6), rgba(255, 255, 0, 0.6), rgba(0, 0, 255, 0.6))"></div><div class="pagination-info"><div class="label">ä¸‹ä¸€ç¯‡</div><div class="next_info">æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆ</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">rieraa</div><div class="author-info__description">ç”Ÿç”Ÿç¯ç«ï¼Œæ˜æš—æ— è¾„</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">12</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">14</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">3</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/rieraa"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>å…¬å‘Š</span></div><div class="announcement_content">This is my Blog</div><div class="xpand" style="height:200px;"><canvas class="illo" width="800" height="800" style="max-width: 160px; max-height: 160px; touch-action: none; width: 640px; height: 640px; padding-top: 2vh"></canvas></div></div><script src="https://fastly.jsdelivr.net/gh/xiaopengand/blogCdn@latest/xzxr/zdog.dist.js"></script><script src="https://fastly.jsdelivr.net/gh/xiaopengand/blogCdn@latest/xzxr/twopeople1.js"></script><script id="rendered-js" src="https://fastly.jsdelivr.net/gh/xiaopengand/blogCdn@latest/xzxr/twopeople.js"></script><style>.card-widget.card-announcement {
margin: 0;
align-items: center;
justify-content: center;
text-align: center;
}
canvas {
display: block;
margin: 0 auto;
cursor: move;
}</style><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>ç›®å½•</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F"><span class="toc-number">1.</span> <span class="toc-text">è®¾è®¡æ¨¡å¼</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F"><span class="toc-number">1.1.</span> <span class="toc-text">ç­–ç•¥æ¨¡å¼</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%8B%E7%BB%8D"><span class="toc-number">1.1.1.</span> <span class="toc-text">ä»‹ç»</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%93%E6%9E%84"><span class="toc-number">1.1.2.</span> <span class="toc-text">ç»“æ„</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%92%E8%89%B2"><span class="toc-number">1.1.3.</span> <span class="toc-text">è§’è‰²</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0"><span class="toc-number">1.1.4.</span> <span class="toc-text">å®ç°</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A3%85%E9%A5%B0%E5%99%A8%E6%A8%A1%E5%BC%8F"><span class="toc-number">1.2.</span> <span class="toc-text">è£…é¥°å™¨æ¨¡å¼</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%8B%E7%BB%8D-1"><span class="toc-number">1.2.1.</span> <span class="toc-text">ä»‹ç»</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%93%E6%9E%84-1"><span class="toc-number">1.2.2.</span> <span class="toc-text">ç»“æ„</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%92%E8%89%B2-1"><span class="toc-number">1.2.3.</span> <span class="toc-text">è§’è‰²</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0-1"><span class="toc-number">1.2.4.</span> <span class="toc-text">å®ç°</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F"><span class="toc-number">1.3.</span> <span class="toc-text">è§‚å¯Ÿè€…æ¨¡å¼</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%8B%E7%BB%8D-2"><span class="toc-number">1.3.1.</span> <span class="toc-text">ä»‹ç»</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%93%E6%9E%84-2"><span class="toc-number">1.3.2.</span> <span class="toc-text">ç»“æ„</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%92%E8%89%B2-2"><span class="toc-number">1.3.3.</span> <span class="toc-text">è§’è‰²</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0-2"><span class="toc-number">1.3.4.</span> <span class="toc-text">å®ç°</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F"><span class="toc-number">1.4.</span> <span class="toc-text">é€‚é…å™¨æ¨¡å¼</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%8B%E7%BB%8D-3"><span class="toc-number">1.4.1.</span> <span class="toc-text">ä»‹ç»</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%93%E6%9E%84-3"><span class="toc-number">1.4.2.</span> <span class="toc-text">ç»“æ„</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%92%E8%89%B2-3"><span class="toc-number">1.4.3.</span> <span class="toc-text">è§’è‰²</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0-3"><span class="toc-number">1.4.4.</span> <span class="toc-text">å®ç°</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8A%BD%E8%B1%A1%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F"><span class="toc-number">1.5.</span> <span class="toc-text">æŠ½è±¡å·¥å‚æ¨¡å¼</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%8B%E7%BB%8D-4"><span class="toc-number">1.5.1.</span> <span class="toc-text">ä»‹ç»</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%93%E6%9E%84-4"><span class="toc-number">1.5.2.</span> <span class="toc-text">ç»“æ„</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%92%E8%89%B2-4"><span class="toc-number">1.5.3.</span> <span class="toc-text">è§’è‰²</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0-4"><span class="toc-number">1.5.4.</span> <span class="toc-text">å®ç°</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BB%BA%E9%80%A0%E8%80%85%E6%A8%A1%E5%BC%8F"><span class="toc-number">1.6.</span> <span class="toc-text">å»ºé€ è€…æ¨¡å¼</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%8B%E7%BB%8D-5"><span class="toc-number">1.6.1.</span> <span class="toc-text">ä»‹ç»</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%93%E6%9E%84-5"><span class="toc-number">1.6.2.</span> <span class="toc-text">ç»“æ„</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%92%E8%89%B2-5"><span class="toc-number">1.6.3.</span> <span class="toc-text">è§’è‰²</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0-5"><span class="toc-number">1.6.4.</span> <span class="toc-text">å®ç°</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8E%9F%E5%9E%8B%E6%A8%A1%E5%BC%8F"><span class="toc-number">1.7.</span> <span class="toc-text">åŸå‹æ¨¡å¼</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%8B%E7%BB%8D-6"><span class="toc-number">1.7.1.</span> <span class="toc-text">ä»‹ç»</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%93%E6%9E%84-6"><span class="toc-number">1.7.2.</span> <span class="toc-text">ç»“æ„</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%92%E8%89%B2-6"><span class="toc-number">1.7.3.</span> <span class="toc-text">è§’è‰²</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0-6"><span class="toc-number">1.7.4.</span> <span class="toc-text">å®ç°</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B5%85%E6%8B%B7%E8%B4%9D"><span class="toc-number">1.7.4.1.</span> <span class="toc-text">æµ…æ‹·è´</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B7%B1%E6%8B%B7%E8%B4%9D"><span class="toc-number">1.7.4.2.</span> <span class="toc-text">æ·±æ‹·è´</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F"><span class="toc-number">1.8.</span> <span class="toc-text">å•ä¾‹æ¨¡å¼</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%8B%E7%BB%8D-7"><span class="toc-number">1.8.1.</span> <span class="toc-text">ä»‹ç»</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%93%E6%9E%84-7"><span class="toc-number">1.8.2.</span> <span class="toc-text">ç»“æ„</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%92%E8%89%B2-7"><span class="toc-number">1.8.3.</span> <span class="toc-text">è§’è‰²</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0-7"><span class="toc-number">1.8.4.</span> <span class="toc-text">å®ç°</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%A5%BF%E6%B1%89%E5%BC%8F"><span class="toc-number">1.8.4.1.</span> <span class="toc-text">é¥¿æ±‰å¼</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%87%92%E6%B1%89%E5%BC%8F"><span class="toc-number">1.8.4.2.</span> <span class="toc-text">æ‡’æ±‰å¼</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%9D%99%E6%80%81%E5%86%85%E9%83%A8%E7%B1%BB"><span class="toc-number">1.8.4.3.</span> <span class="toc-text">é™æ€å†…éƒ¨ç±»</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A1%A5%E6%8E%A5%E6%A8%A1%E5%BC%8F"><span class="toc-number">1.9.</span> <span class="toc-text">æ¡¥æ¥æ¨¡å¼</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%8B%E7%BB%8D-8"><span class="toc-number">1.9.1.</span> <span class="toc-text">ä»‹ç»</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%93%E6%9E%84-8"><span class="toc-number">1.9.2.</span> <span class="toc-text">ç»“æ„</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%92%E8%89%B2-8"><span class="toc-number">1.9.3.</span> <span class="toc-text">è§’è‰²</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0-8"><span class="toc-number">1.9.4.</span> <span class="toc-text">å®ç°</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%8A%B6%E6%80%81%E6%A8%A1%E5%BC%8F"><span class="toc-number">1.10.</span> <span class="toc-text">çŠ¶æ€æ¨¡å¼</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%8B%E7%BB%8D-9"><span class="toc-number">1.10.1.</span> <span class="toc-text">ä»‹ç»</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%93%E6%9E%84-9"><span class="toc-number">1.10.2.</span> <span class="toc-text">ç»“æ„</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%92%E8%89%B2-9"><span class="toc-number">1.10.3.</span> <span class="toc-text">è§’è‰²</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0-9"><span class="toc-number">1.10.4.</span> <span class="toc-text">å®ç°</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B6%E9%A4%98%E8%BD%89%E6%8F%9B%E6%96%B9%E5%BC%8F%E5%AF%A6%E7%8F%BE"><span class="toc-number">1.10.5.</span> <span class="toc-text">å…¶é¤˜è½‰æ›æ–¹å¼å¯¦ç¾</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%91%BD%E4%BB%A4%E6%A8%A1%E5%BC%8F"><span class="toc-number">1.11.</span> <span class="toc-text">å‘½ä»¤æ¨¡å¼</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%8B%E7%BB%8D-10"><span class="toc-number">1.11.1.</span> <span class="toc-text">ä»‹ç»</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%93%E6%9E%84-10"><span class="toc-number">1.11.2.</span> <span class="toc-text">ç»“æ„</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%92%E8%89%B2-10"><span class="toc-number">1.11.3.</span> <span class="toc-text">è§’è‰²</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0-10"><span class="toc-number">1.11.4.</span> <span class="toc-text">å®ç°</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%B5%84%E5%90%88%E6%A8%A1%E5%BC%8F"><span class="toc-number">1.12.</span> <span class="toc-text">çµ„åˆæ¨¡å¼</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%8B%E7%B4%B9"><span class="toc-number">1.12.1.</span> <span class="toc-text">ä»‹ç´¹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B5%90%E6%A7%8B"><span class="toc-number">1.12.2.</span> <span class="toc-text">çµæ§‹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%92%E8%89%B2-11"><span class="toc-number">1.12.3.</span> <span class="toc-text">è§’è‰²</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%A6%E7%8F%BE"><span class="toc-number">1.12.4.</span> <span class="toc-text">å¯¦ç¾</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A8%A1%E5%BC%8F%EF%BC%88%E6%A8%A1%E6%9D%BF%EF%BC%89"><span class="toc-number">1.13.</span> <span class="toc-text">æ¨¡å¼ï¼ˆæ¨¡æ¿ï¼‰</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%8B%E7%B4%B9-1"><span class="toc-number">1.13.1.</span> <span class="toc-text">ä»‹ç´¹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B5%90%E6%A7%8B-1"><span class="toc-number">1.13.2.</span> <span class="toc-text">çµæ§‹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%92%E8%89%B2-12"><span class="toc-number">1.13.3.</span> <span class="toc-text">è§’è‰²</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%A6%E7%8F%BE-1"><span class="toc-number">1.13.4.</span> <span class="toc-text">å¯¦ç¾</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>æœ€æ–°æ–‡ç« </span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/post/5a252ba9.html" title="csså¸ƒå±€">csså¸ƒå±€</a><time datetime="2024-02-20T09:55:31.000Z" title="å‘è¡¨äº 2024-02-20 17:55:31">2024-02-20</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/post/e190ec45.html" title="æµè§ˆå™¨å¦‚ä½•ä¿æŒç™»å½•">æµè§ˆå™¨å¦‚ä½•ä¿æŒç™»å½•</a><time datetime="2024-01-06T06:27:40.000Z" title="å‘è¡¨äº 2024-01-06 14:27:40">2024-01-06</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/post/4a17b156.html" title="WELCOME TO MY BLOG ğŸ¾ ğŸª… ğŸ¥‚ ğŸ‰">WELCOME TO MY BLOG ğŸ¾ ğŸª… ğŸ¥‚ ğŸ‰</a><time datetime="2023-11-25T08:32:58.288Z" title="å‘è¡¨äº 2023-11-25 16:32:58">2023-11-25</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/post/87bab44d.html" title="å‡½æ•°é—­åŒ…">å‡½æ•°é—­åŒ…</a><time datetime="2023-11-05T14:48:29.000Z" title="å‘è¡¨äº 2023-11-05 22:48:29">2023-11-05</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/post/70316f9e.html" title="Git Commit">Git Commit</a><time datetime="2023-10-30T09:16:22.000Z" title="å‘è¡¨äº 2023-10-30 17:16:22">2023-10-30</time></div></div></div></div></div></div></main><footer id="footer" style="background: linear-gradient(35deg, rgba(0, 128, 0, 0.6), rgba(255, 255, 0, 0.6), rgba(0, 0, 255, 0.6), rgba(255, 0, 0, 0.6), rgba(128, 0, 128, 0.6))"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2024 By rieraa</div><div class="framework-info"><span>æ¡†æ¶ </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>ä¸»é¢˜ </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="é˜…è¯»æ¨¡å¼"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="æµ…è‰²å’Œæ·±è‰²æ¨¡å¼è½¬æ¢"><i class="fas fa-adjust"></i></button><!--a.icon-V.hidden(onclick='switchNightMode()',  title=_p('rightside.night_mode_title'))--><!--    svg(width='25', height='25', viewBox='0 0 1024 1024')--><!--        use#modeicon(xlink:href='#icon-moon')--><button id="hide-aside-btn" type="button" title="å•æ å’ŒåŒæ åˆ‡æ¢"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="è®¾ç½®"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="ç›®å½•"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><div class="js-pjax"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/metingjs/dist/Meting.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener
  btf.removeGlobalFnEvent('pjax')
  btf.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

  typeof disqusjs === 'object' && disqusjs.destroy()
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">æœç´¢</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  æ•°æ®åº“åŠ è½½ä¸­</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="æœç´¢æ–‡ç« " type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>